/* * DecisionPane.java * Created on 7 mai 2002, 16:04 */package srcastra.astra.gui.modules.decision;import srcastra.astra.sys.rmi.astrainterface;import srcastra.astra.sys.classetransfert.*;import srcastra.astra.gui.components.actions.actionToolBar.ActionToolBar;import java.util.ArrayList;import srcastra.astra.gui.sys.ErreurScreenLibrary;import srcastra.astra.sys.classetransfert.dossier.produit_T;/** * @author Sébastien */public class DecisionPane extends javax.swing.JPanel {    /**     * Creates new form DecisionPane     */    srcastra.astra.gui.modules.dossier.productSpecification.gestionnairepaneaux.InterfacePanel supReducPanel;    public DecisionPane(astrainterface serveur, Loginusers_T currentUser) {        this.serveur = serveur;        this.currentUser = currentUser;        initComponents();        initComponents2();    }    /**     * Creates new form DecisionPane     */    public DecisionPane(astrainterface serveur, Loginusers_T currentUser, ActionToolBar actionToolBar, javax.swing.JPanel parent, int objectCleUnik, srcastra.astra.gui.modules.MainScreenModule mainScreen) {        this.serveur = serveur;        this.currentUser = currentUser;        this.objectCleUnik = objectCleUnik;        this.actionToolBar = actionToolBar;        this.parent = parent;        this.mainScreen = mainScreen;        initComponents();        initComponents2();        downloadModeles();        loadModeles();    }    public DecisionPane(astrainterface serveur, Loginusers_T currentUser, ActionToolBar actionToolBar, javax.swing.JPanel parent, int objectCleUnik, srcastra.astra.gui.modules.MainScreenModule mainScreen, srcastra.astra.sys.classetransfert.dossier.InterfaceProduit produit, srcastra.astra.gui.modules.dossier.productSpecification.gestionnairepaneaux.InterfacePanel panel) {        this.serveur = serveur;        this.currentUser = currentUser;        this.objectCleUnik = objectCleUnik;        this.actionToolBar = actionToolBar;        this.parent = parent;        this.mainScreen = mainScreen;        this.produit = produit;        this.supReducPanel = panel;        initComponents();        initComponents2();        downloadModeles();        loadModeles();    }    /**     * This method is called from within the constructor to     * <p/>     * <p/>     * <p/>     * initialize the form.     * <p/>     * <p/>     * <p/>     * WARNING: Do NOT modify this code. The content of this method is     * <p/>     * <p/>     * <p/>     * always regenerated by the Form Editor.     */    private void initComponents() {        grp_Pan_NorthPan = new javax.swing.JPanel();        jPanel2 = new javax.swing.JPanel();        jPanel4 = new javax.swing.JPanel();        grp_ACB_modeles = new srcastra.astra.gui.components.combobox.aCombo.ACombo();        jPanel5 = new javax.swing.JPanel();        grp_Pan_status = new javax.swing.JPanel();        jPanel3 = new javax.swing.JPanel();        grp_Pan_CenterPan = new javax.swing.JPanel();        setLayout(new java.awt.BorderLayout());        setPreferredSize(new java.awt.Dimension(730, 500));        setMinimumSize(new java.awt.Dimension(730, 500));        grp_Pan_NorthPan.setLayout(new java.awt.BorderLayout());        jPanel2.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEFT, 1, 1));        jPanel4.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.CENTER, 1, 1));        grp_ACB_modeles.setEnabled(false);        grp_ACB_modeles.setPreferredSize(new java.awt.Dimension(150, 18));        grp_ACB_modeles.setMaximumSize(new java.awt.Dimension(150, 18));        grp_ACB_modeles.setMinimumSize(new java.awt.Dimension(150, 18));        jPanel4.add(grp_ACB_modeles);        jPanel2.add(jPanel4);        jPanel5.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.CENTER, 1, 1));        grp_Pan_status.setBorder(new javax.swing.border.LineBorder(java.awt.Color.black));        grp_Pan_status.setBackground(java.awt.Color.white);        grp_Pan_status.setPreferredSize(new java.awt.Dimension(300, 17));        jPanel5.add(grp_Pan_status);        jPanel2.add(jPanel5);        grp_Pan_NorthPan.add(jPanel2, java.awt.BorderLayout.CENTER);        jPanel3.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.RIGHT, 1, 1));        grp_Pan_NorthPan.add(jPanel3, java.awt.BorderLayout.EAST);        add(grp_Pan_NorthPan, java.awt.BorderLayout.NORTH);        grp_Pan_CenterPan.setLayout(new java.awt.GridLayout(1, 0));        add(grp_Pan_CenterPan, java.awt.BorderLayout.CENTER);    }    private void initComponents2() {        grp_TDec_tableDecision = new TableDecision(serveur, currentUser, mainScreen, actionToolBar, objectCleUnik, parent, this, this.produit, this.supReducPanel);        grp_Pan_CenterPan.add(grp_TDec_tableDecision);        grp_TDec_tableDecision.displayReadMode();        grp_Pan_CenterPan.updateUI();    }    private void downloadModeles() {        try {            modeles = serveur.renvIntitule(currentUser.getUrlmcleunik(), currentUser.getUrcleunik(), 1, serveur.COMBO_FOURGRPDEC, 11);            System.out.println("lol");        }        catch (java.rmi.RemoteException re) {            ErreurScreenLibrary.displayErreur(this, ErreurScreenLibrary.REMOTE_EXCEPTION, srcastra.astra.Astra.DEBUG, re);        }        catch (Exception e) {            ErreurScreenLibrary.displayErreur(this, ErreurScreenLibrary.EXCEPTION, srcastra.astra.Astra.DEBUG, e);        }        // load    }    private void loadModeles() {        try {            grp_ACB_modeles.addItems(java.util.ResourceBundle.getBundle("srcastra/astra/locale/TableDecision", currentUser.getLangage()).getString("TD_choisirUnModele"));        }        catch (java.util.MissingResourceException mre) {            ErreurScreenLibrary.displayErreur(this, ErreurScreenLibrary.MISSING_RESSOURCE_EXCEPTION, srcastra.astra.Astra.DEBUG, mre);        }        if (modeles != null) {            Object[] obj;            String txtModel;            System.out.println("TAILLE DE L'ARRAYLIST DES MODELES : " + modeles.size());            for (int i = 0; i < modeles.size(); i++) {                obj = (Object[]) modeles.get(i);                txtModel = (String) obj[1];                System.out.println("INTITULE DU MODELE : " + txtModel);                if (txtModel != null && !txtModel.equals("")) {                    grp_ACB_modeles.addItems(txtModel);                }            }            //-> action performed sur grp_ACB_modeles            grp_ACB_modeles.addActionListener(new java.awt.event.ActionListener() {                public void actionPerformed(java.awt.event.ActionEvent event) {                    grp_ACB_modelesActionPerformed(event);                }            });        }    }    public void grp_ACB_modelesActionPerformed(java.awt.event.ActionEvent event) {        String txt = grp_ACB_modeles.getSelectedText();        int id = getCorrectIDFromArrayList(txt);        if (id > -1) {            grp_TDec_tableDecision.loadModele(id);        }    }    private int getCorrectIDFromArrayList(String txt) {        Object[] obj;        for (int i = 0; i < modeles.size(); i++) {            obj = (Object[]) modeles.get(i);            if (((String) obj[1]).equals(txt)) {                return ((Integer) obj[0]).intValue();            }        }        return -1;    }    /**     * Getter for property serveur.     *     * @return Value of property serveur.     */    public srcastra.astra.sys.rmi.astrainterface getServeur() {        return serveur;    }    /**     * Getter for property grp_TDec_tableDecision.     *     * @return Value of property grp_TDec_tableDecision.     */    public srcastra.astra.gui.modules.decision.TableDecision getGrp_TDec_tableDecision() {        return grp_TDec_tableDecision;    }    /**     * Setter for property grp_TDec_tableDecision.     *     * @param grp_TDec_tableDecision New value of property grp_TDec_tableDecision.     */    public void setGrp_TDec_tableDecision(srcastra.astra.gui.modules.decision.TableDecision grp_TDec_tableDecision) {        this.grp_TDec_tableDecision = grp_TDec_tableDecision;    }    /**     * Getter for property mainScreen.     *     * @return Value of property mainScreen.     */    public srcastra.astra.gui.modules.MainScreenModule getMainScreen() {        return mainScreen;    }    /**     * Setter for property mainScreen.     *     * @param mainScreen New value of property mainScreen.     */    public void setMainScreen(srcastra.astra.gui.modules.MainScreenModule mainScreen) {        this.mainScreen = mainScreen;        grp_TDec_tableDecision.setMainScreen(mainScreen);    }    public void setEnabledGrp_ACB_modele(boolean enabled) {        grp_ACB_modeles.setEnabled(enabled);        if (!enabled) {            grp_ACB_modeles.setSelectedIndex(0);        }    }    private astrainterface serveur;    private Loginusers_T currentUser;    private int objectCleUnik;    private TableDecision grp_TDec_tableDecision;    private ActionToolBar actionToolBar;    private javax.swing.JPanel parent;    private srcastra.astra.gui.modules.MainScreenModule mainScreen;    private ArrayList modeles;    // Variables declaration - do not modify    private javax.swing.JPanel grp_Pan_NorthPan;    private javax.swing.JPanel jPanel2;    private javax.swing.JPanel jPanel4;    private srcastra.astra.gui.components.combobox.aCombo.ACombo grp_ACB_modeles;    private javax.swing.JPanel jPanel5;    private javax.swing.JPanel grp_Pan_status;    private javax.swing.JPanel jPanel3;    private javax.swing.JPanel grp_Pan_CenterPan;    private srcastra.astra.sys.classetransfert.dossier.InterfaceProduit produit;    // End of variables declaration}