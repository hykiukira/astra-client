/* * FournisseurModules.java * Created on 21 mars 2002, 11:05 */package srcastra.astra.gui.modules.fournisseurs;import srcastra.astra.sys.classetransfert.Loginusers_T;import srcastra.astra.sys.rmi.astrainterface;import srcastra.astra.gui.modules.*;import srcastra.astra.gui.components.actions.actionToolBar.*;import srcastra.astra.gui.components.AIframe;import srcastra.astra.gui.sys.ErreurScreenLibrary;import srcastra.astra.gui.MainFrame;import srcastra.astra.sys.rmi.*;import javax.swing.event.InternalFrameEvent;import srcastra.astra.gui.modules.Mailing.*;/** * @author  Sébastien*/public class FournisseurModules extends javax.swing.JInternalFrame implements MainScreenModule, AIframe,MailInterface {    /** Creates new form FournisseurModules */    public FournisseurModules(java.awt.Frame superOwner, astrainterface serveur, Loginusers_T currentUser, ActionToolBar actionToolBar, javax.swing.event.InternalFrameListener iFrameListener) {        this.serveur = serveur;        this.currentUser = currentUser;        this.actionToolBar = actionToolBar;        this.frameP = frameP;        this.iFrameListener = iFrameListener;        this.superOwner = superOwner;        initIndexComponents();        this.addInternalFrameListener(iFrameListener);        new ManageMailingFrame(this,this,getSuperOwner(),srcastra.astra.sys.configuration.MainConfig.getMainConfig().getConfig());        // nom & titre de l'iframe        try {            setName(java.util.ResourceBundle.getBundle("srcastra/astra/locale/IFrame", currentUser.getLangage()).getString("IF_Fournisseur"));            setTitle(java.util.ResourceBundle.getBundle("srcastra/astra/locale/IFrame", currentUser.getLangage()).getString("IF_Fournisseur"));        }        catch (java.util.MissingResourceException mre) {            ErreurScreenLibrary.displayErreur(this, ErreurScreenLibrary.MISSING_RESSOURCE_EXCEPTION, srcastra.astra.Astra.DEBUG, mre);        }            }     public DossierRmiInterface getServeurDossier() {        return null;    }    /** This method is called from within the constructor to     * initialize the form.     * WARNING: Do NOT modify this code. The content of this method is     * always regenerated by the Form Editor.     */    private void initComponents() {//GEN-BEGIN:initComponents        java.awt.GridBagConstraints gridBagConstraints;        grp_Pan_NorthPan = new javax.swing.JPanel();        grp_Pan_StatusPan = new javax.swing.JPanel();        jPanel2 = new javax.swing.JPanel();        jPanel4 = new javax.swing.JPanel();        jLabel2 = new javax.swing.JLabel();        jLabel3 = new javax.swing.JLabel();        grp_Label_reference = new javax.swing.JLabel();        grp_Label_Nom = new javax.swing.JLabel();        jLabel13 = new javax.swing.JLabel();        grp_Label_cree = new javax.swing.JLabel();        jPanel3 = new javax.swing.JPanel();        jPanel5 = new javax.swing.JPanel();        jLabel7 = new javax.swing.JLabel();        jLabel8 = new javax.swing.JLabel();        grp_Label_Email = new javax.swing.JLabel();        grp_Label_telephone = new javax.swing.JLabel();        jLabel11 = new javax.swing.JLabel();        grp_Label_Fax = new javax.swing.JLabel();        grp_Pan_CenterPan = new javax.swing.JPanel();        grp_TPane_dispPane = new javax.swing.JTabbedPane();        grp_Pan_SouthPan = new javax.swing.JPanel();        setClosable(true);        setIconifiable(true);        setTitle(java.util.ResourceBundle.getBundle("srcastra/astra/locale/IFrame", currentUser.getLangage()).getString("IF_Fournisseur"));        setName(java.util.ResourceBundle.getBundle("srcastra/astra/locale/IFrame").getString("IF_Fournisseur"));        setPreferredSize(new java.awt.Dimension(730, 520));        grp_Pan_NorthPan.setLayout(new java.awt.BorderLayout());        grp_Pan_NorthPan.setBorder(new javax.swing.border.EmptyBorder(new java.awt.Insets(4, 4, 4, 4)));        grp_Pan_StatusPan.setLayout(new java.awt.GridLayout(1, 2));        grp_Pan_StatusPan.setBackground(java.awt.Color.white);        grp_Pan_StatusPan.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(0, 0, 0)));        grp_Pan_StatusPan.setPreferredSize(new java.awt.Dimension(419, 48));        jPanel2.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEFT, 5, 2));        jPanel2.setBackground(java.awt.Color.white);        jPanel2.setMinimumSize(new java.awt.Dimension(139, 45));        jPanel2.setPreferredSize(new java.awt.Dimension(139, 45));        jPanel4.setLayout(new java.awt.GridBagLayout());        jPanel4.setBackground(java.awt.Color.white);        jPanel4.setOpaque(false);        jLabel2.setFont(new java.awt.Font("Tahoma", 0, 10));        jLabel2.setText(java.util.ResourceBundle.getBundle("srcastra/astra/locale/ModuleFournisseur", currentUser.getLangage()).getString("FI_ReferenceFournisseur"));        jLabel2.setMinimumSize(new java.awt.Dimension(90, 14));        jLabel2.setPreferredSize(new java.awt.Dimension(90, 14));        gridBagConstraints = new java.awt.GridBagConstraints();        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;        gridBagConstraints.insets = new java.awt.Insets(0, 0, 0, 3);        jPanel4.add(jLabel2, gridBagConstraints);        jLabel3.setFont(new java.awt.Font("Tahoma", 0, 10));        jLabel3.setText(java.util.ResourceBundle.getBundle("srcastra/astra/locale/ModuleFournisseur", currentUser.getLangage()).getString("FI_NomFournisseur"));        jLabel3.setMinimumSize(new java.awt.Dimension(90, 14));        jLabel3.setPreferredSize(new java.awt.Dimension(90, 14));        gridBagConstraints = new java.awt.GridBagConstraints();        gridBagConstraints.gridx = 0;        gridBagConstraints.gridy = 1;        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;        gridBagConstraints.insets = new java.awt.Insets(0, 0, 0, 3);        jPanel4.add(jLabel3, gridBagConstraints);        grp_Label_reference.setFont(new java.awt.Font("Tahoma", 0, 10));        grp_Label_reference.setForeground(java.awt.Color.red);        gridBagConstraints = new java.awt.GridBagConstraints();        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;        jPanel4.add(grp_Label_reference, gridBagConstraints);        grp_Label_Nom.setFont(new java.awt.Font("Tahoma", 0, 10));        grp_Label_Nom.setForeground(java.awt.Color.red);        gridBagConstraints = new java.awt.GridBagConstraints();        gridBagConstraints.gridx = 1;        gridBagConstraints.gridy = 1;        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;        jPanel4.add(grp_Label_Nom, gridBagConstraints);        jLabel13.setFont(new java.awt.Font("Tahoma", 0, 10));        jLabel13.setText(java.util.ResourceBundle.getBundle("srcastra/astra/locale/ModuleFournisseur", currentUser.getLangage()).getString("FI_CreeFournisseur"));        jLabel13.setMinimumSize(new java.awt.Dimension(90, 14));        jLabel13.setPreferredSize(new java.awt.Dimension(90, 14));        gridBagConstraints = new java.awt.GridBagConstraints();        gridBagConstraints.gridx = 0;        gridBagConstraints.gridy = 2;        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;        gridBagConstraints.insets = new java.awt.Insets(0, 0, 0, 3);        jPanel4.add(jLabel13, gridBagConstraints);        grp_Label_cree.setFont(new java.awt.Font("Tahoma", 0, 10));        grp_Label_cree.setForeground(java.awt.Color.red);        gridBagConstraints = new java.awt.GridBagConstraints();        gridBagConstraints.gridx = 1;        gridBagConstraints.gridy = 2;        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;        jPanel4.add(grp_Label_cree, gridBagConstraints);        jPanel2.add(jPanel4);        grp_Pan_StatusPan.add(jPanel2);        jPanel3.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEFT, 5, 2));        jPanel3.setBackground(java.awt.Color.white);        jPanel3.setMinimumSize(new java.awt.Dimension(139, 45));        jPanel3.setPreferredSize(new java.awt.Dimension(139, 45));        jPanel5.setLayout(new java.awt.GridBagLayout());        jPanel5.setBackground(java.awt.Color.white);        jPanel5.setOpaque(false);        jLabel7.setFont(new java.awt.Font("Tahoma", 0, 10));        jLabel7.setText(java.util.ResourceBundle.getBundle("srcastra/astra/locale/ModuleFournisseur", currentUser.getLangage()).getString("FI_EmailFournisseur"));        jLabel7.setMinimumSize(new java.awt.Dimension(90, 14));        jLabel7.setPreferredSize(new java.awt.Dimension(90, 14));        gridBagConstraints = new java.awt.GridBagConstraints();        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;        gridBagConstraints.insets = new java.awt.Insets(0, 0, 0, 3);        jPanel5.add(jLabel7, gridBagConstraints);        jLabel8.setFont(new java.awt.Font("Tahoma", 0, 10));        jLabel8.setText(java.util.ResourceBundle.getBundle("srcastra/astra/locale/ModuleFournisseur", currentUser.getLangage()).getString("FI_TelephoneFournisseur"));        jLabel8.setMinimumSize(new java.awt.Dimension(90, 14));        jLabel8.setPreferredSize(new java.awt.Dimension(90, 14));        gridBagConstraints = new java.awt.GridBagConstraints();        gridBagConstraints.gridx = 0;        gridBagConstraints.gridy = 1;        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;        gridBagConstraints.insets = new java.awt.Insets(0, 0, 0, 3);        jPanel5.add(jLabel8, gridBagConstraints);        grp_Label_Email.setFont(new java.awt.Font("Tahoma", 0, 10));        grp_Label_Email.setForeground(java.awt.Color.red);        gridBagConstraints = new java.awt.GridBagConstraints();        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;        jPanel5.add(grp_Label_Email, gridBagConstraints);        grp_Label_telephone.setFont(new java.awt.Font("Tahoma", 0, 10));        grp_Label_telephone.setForeground(java.awt.Color.red);        gridBagConstraints = new java.awt.GridBagConstraints();        gridBagConstraints.gridx = 1;        gridBagConstraints.gridy = 1;        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;        jPanel5.add(grp_Label_telephone, gridBagConstraints);        jLabel11.setFont(new java.awt.Font("Tahoma", 0, 10));        jLabel11.setText(java.util.ResourceBundle.getBundle("srcastra/astra/locale/ModuleFournisseur",  currentUser.getLangage()).getString("FI_FaxFournisseur"));        jLabel11.setMinimumSize(new java.awt.Dimension(90, 14));        jLabel11.setPreferredSize(new java.awt.Dimension(90, 14));        gridBagConstraints = new java.awt.GridBagConstraints();        gridBagConstraints.gridx = 0;        gridBagConstraints.gridy = 2;        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;        gridBagConstraints.insets = new java.awt.Insets(0, 0, 0, 3);        jPanel5.add(jLabel11, gridBagConstraints);        grp_Label_Fax.setFont(new java.awt.Font("Tahoma", 0, 10));        grp_Label_Fax.setForeground(java.awt.Color.red);        gridBagConstraints = new java.awt.GridBagConstraints();        gridBagConstraints.gridx = 1;        gridBagConstraints.gridy = 2;        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;        jPanel5.add(grp_Label_Fax, gridBagConstraints);        jPanel3.add(jPanel5);        grp_Pan_StatusPan.add(jPanel3);        grp_Pan_NorthPan.add(grp_Pan_StatusPan, java.awt.BorderLayout.CENTER);        getContentPane().add(grp_Pan_NorthPan, java.awt.BorderLayout.NORTH);        grp_Pan_CenterPan.setLayout(new java.awt.GridLayout(1, 0));        grp_TPane_dispPane.setTabPlacement(javax.swing.JTabbedPane.BOTTOM);        grp_TPane_dispPane.setRequestFocusEnabled(false);        grp_Pan_CenterPan.add(grp_TPane_dispPane);        getContentPane().add(grp_Pan_CenterPan, java.awt.BorderLayout.CENTER);        grp_Pan_SouthPan.setBorder(new javax.swing.border.SoftBevelBorder(javax.swing.border.BevelBorder.LOWERED));        getContentPane().add(grp_Pan_SouthPan, java.awt.BorderLayout.SOUTH);        pack();    }//GEN-END:initComponents    private void initIndexComponents() {        grp_Pan_FournisseurIndex = new ClientIndex(this.serveur, this.currentUser, this.actionToolBar, this,1,new srcastra.astra.gui.sys.tableModel.client.FournisseurListeTableModel(serveur,currentUser,(srcastra.astra.gui.MainFrame)getSuperOwner()));           this.setPreferredSize(new java.awt.Dimension(730, 500));        this.setMaximizable(false);        this.setIconifiable(true);        this.setClosable(true);        this.setResizable(false);        this.getContentPane().setLayout(new java.awt.GridLayout(1,0));        this.getContentPane().add(grp_Pan_FournisseurIndex);        mail=grp_Pan_FournisseurIndex;        pack();    }    public void displayGeneralInfosPane() {        nextScreen(-1, false);    }        public void nextScreen(int currentScreen) {        int cs = ((currentScreen + 1) > screenDisplaying.length) ? 0 : currentScreen + 1;        screenDisplaying[cs].setAction(1);        screenDisplaying[cs].setFrCleunik(this.frCleUnik);        screenDisplaying[cs].displayInsertMode();        screenDisplaying[cs].chargeData();        screenDisplaying[cs].setEnabled(false);        screenDisplaying[cs].setRequestFocusEnabled(false);        screenDisplaying[cs].setThisAsToolBarComponent();     //   screenDisplaying[cs].addKeystroque();        grp_TPane_dispPane.addTab(screenDisplaying[cs].getTitle(), (java.awt.Component)screenDisplaying[cs]);        grp_TPane_dispPane.setSelectedComponent((java.awt.Component) screenDisplaying[cs]);    }        public void nextScreen(int currentScreen, boolean affich) {        int cs = ((currentScreen + 1) > screenDisplaying.length) ? 0 : currentScreen + 1;        if (!affich) {            screenDisplaying[cs].setAction(1);            screenDisplaying[cs].setFrCleunik(this.frCleUnik);            screenDisplaying[cs].displayInsertMode();            screenDisplaying[cs].setEnabled(false);            screenDisplaying[cs].setRequestFocusEnabled(false);            screenDisplaying[cs].chargeData();            screenDisplaying[cs].setThisAsToolBarComponent();            if(screenDisplaying[cs] instanceof MailInterface)                mail=(MailInterface)screenDisplaying[cs];            else                mail=null;            grp_TPane_dispPane.addTab(screenDisplaying[cs].getTitle(), (java.awt.Component)screenDisplaying[cs]);        }        else {            displayReadSequence(this.frCleUnik);        }       }    public boolean  getNestedSignaletique() {        return false;    }    /** De l'interface : MainScreenModule     * fixe la clé unik selon le contexte  */    public void setContextCleUnik(int ContextCleUnik) {        this.frCleUnik = ContextCleUnik;           }    public void displayDeleteSequence() {    }       public void setNestedSignaletique(boolean netstedSignletique){            }    public void displayReadSequence(int cleUnik) {        this.frCleUnik = cleUnik;        //loadScreen();        this.getContentPane().removeAll();        loadScreen();        this.getContentPane().setLayout(new java.awt.BorderLayout());        initComponents();        grp_TPane_dispPane.addMouseListener(new java.awt.event.MouseAdapter() {            public void mouseClicked(java.awt.event.MouseEvent evt) {               if(grp_TPane_dispPane.getSelectedComponent() instanceof MailInterface)                   mail=(MailInterface)grp_TPane_dispPane.getSelectedComponent();               else                 mail=null;            }        });        grp_Pan_StatusPan.setVisible(true);              for (int i=0; i < screenDisplaying.length ; i++) {                grp_TPane_dispPane.addTab(screenDisplaying[i].getTitle(), (java.awt.Component) screenDisplaying[i]);                screenDisplaying[i].setAction(0);              //  screenDisplaying[i].addKeystroque();                screenDisplaying[i].setFrCleunik(cleUnik);                if (i == 0) {                    grp_TPane_dispPane.setSelectedComponent((java.awt.Component) screenDisplaying[i]);                                      mail=(MailInterface)screenDisplaying[i];                            screenDisplaying[i].displayReadMode();                }        }          this.updateUI();              }    public void displayCreateSequence() {        loadScreen();        // this.remove(grp_Pan_FournisseurIndex);        this.getContentPane().removeAll();        this.getContentPane().setLayout(new java.awt.BorderLayout());        initComponents();        grp_Pan_StatusPan.setVisible(false);        this.updateUI();        displayGeneralInfosPane();    }    public void closeModule() {               this.doDefaultCloseAction();    }   public void doDefaultCloseAction(){        try{        serveur.remoterollback(getCurrentUser().getUrcleunik());        }catch(java.rmi.RemoteException re){           ErreurScreenLibrary.displayErreur(this, ErreurScreenLibrary.MISSING_RESSOURCE_EXCEPTION, srcastra.astra.Astra.DEBUG, re);          }       InternalFrameEvent closeWindow=new InternalFrameEvent(this,InternalFrameEvent.INTERNAL_FRAME_CLOSING);       this.iFrameListener.internalFrameClosing(closeWindow);       dispose();   }    public void cancelModule() {        int key = this.frCleUnik;        this.getContentPane().removeAll();        // this.getContentPane().setLayout(new java.awt.BorderLayout());        initIndexComponents();        this.updateUI();        grp_Pan_FournisseurIndex.getGrp_TField_nom().requestFocus();        mail=grp_Pan_FournisseurIndex;    }   /** Permet de changer l'état de la TabbedPane dans le pricipal  */    public void enabledTabbedPane(boolean enabled) {        grp_TPane_dispPane.setEnabled(enabled);    }    /** Permet de charger le panel des statuts  */    public void chargeStatusPanel(String[] statuts) {        grp_Label_reference.setText(statuts[0]);        grp_Label_Nom.setText(statuts[1]);        grp_Label_cree.setText(statuts[2]);        grp_Label_Email.setText(statuts[3]);        grp_Label_telephone.setText(statuts[4]);        grp_Label_Fax.setText(statuts[5]);   }    /** Permet de renvoyer un objet frame pour un eventuel modal  */    public java.awt.Frame getFrame() {        return frameP;    }        public void loadScreen() {        this.screenDisplaying = new InternScreenModule[] {            new FournisseurGeneralInfoPane(serveur, currentUser, this, actionToolBar),             new FournisseurDocumentPane(this.serveur, this.currentUser, this, actionToolBar, this.frCleUnik),            /*new FournisseurTableDecision(this.serveur, this.currentUser, this, actionToolBar, this.frCleUnik),*/            new FournisseurContactPane(this.serveur, this.currentUser, this, actionToolBar, this.frCleUnik),            new FournisseurGrpProduits(this.serveur, this.currentUser, this, actionToolBar, this.frCleUnik),            new FournisseurMemoPane(this.serveur, this.currentUser, this, actionToolBar, this.frCleUnik)        };    }    /** Getter for property currentPanel.     * @return Value of property currentPanel.     */    public srcastra.astra.gui.components.actions.actionToolBar.ToolBarComposer getCurrentPanel() {        return currentPanel;    }    /** Setter for property currentPanel.     * @param currentPanel New value of property currentPanel.     */    public void setCurrentPanel(srcastra.astra.gui.components.actions.actionToolBar.ToolBarComposer currentPanel) {        this.currentPanel = currentPanel;        actionToolBar.setTbComposer(currentPanel);    }    public void reloadToolBarInfo() {      if (currentPanel != null) {        actionToolBar.setTbComposer(this.currentPanel);        actionToolBar.reloadActionEnabled(this.currentActionEnabled);      }    }     public void saveToolBarInfo() {       //currentPanel = actionToolBar.getTbComposer();       // currentActionEnabled = actionToolBar.getActionEnabled();      }        public void setCurrentActionEnabled(int[] actionEnabled) {        actionToolBar.setActionEnabled(actionEnabled);        this.currentActionEnabled = this.actionToolBar.getActionEnabled();    }       /** Getter for property frCleUnik.     * @return Value of property frCleUnik.     */    public int getFrCleUnik() {        return frCleUnik;    }        /** Setter for property frCleUnik.     * @param frCleUnik New value of property frCleUnik.     */    public void setFrCleUnik(int frCleUnik) {        this.frCleUnik = frCleUnik;    }        public astrainterface getServeur() {        return this.serveur;    }        public Loginusers_T getCurrentUser() {        return this.currentUser;    }        public void changeCursor(int changeLocation, java.awt.Cursor cursor) {        srcastra.astra.gui.sys.utils.CursorChange.changeCursor(changeLocation, cursor, superOwner, this);    }    public java.awt.Frame getSuperOwner(){     return (MainFrame)this.superOwner;      }        public java.awt.Frame getOwner() {        return null;    }        public void registerTable(javax.swing.JTable generique_table) {    }        public void nextScreen(int currentScreen, int insert) {    }    /** Creates a new instance of MailInterface  */    public String[] getEmailAdres() {        if(mail!=null)            return mail.getEmailAdres();        //return new String[]{"test@test.com"};        return null;    }        public Loginusers_T getUser() {        return getCurrentUser();    }             public String getFormEntiteMail() {              return "";   }    private FournisseurGeneralInfoPane grp_ModPan_GenInfosPane;        private astrainterface serveur;    private Loginusers_T currentUser;    private ActionToolBar actionToolBar;    private InternScreenModule[] screenDisplaying;     private java.awt.Frame frameP;    private int frCleUnik;    private srcastra.astra.gui.components.actions.actionToolBar.ToolBarComposer currentPanel;    private int[] currentActionEnabled;    javax.swing.event.InternalFrameListener iFrameListener;    private java.awt.Frame superOwner;    // Variables declaration - do not modify//GEN-BEGIN:variables    private javax.swing.JLabel grp_Label_Email;    private javax.swing.JLabel grp_Label_Fax;    private javax.swing.JLabel grp_Label_Nom;    private javax.swing.JLabel grp_Label_cree;    private javax.swing.JLabel grp_Label_reference;    private javax.swing.JLabel grp_Label_telephone;    private javax.swing.JPanel grp_Pan_CenterPan;    private javax.swing.JPanel grp_Pan_NorthPan;    private javax.swing.JPanel grp_Pan_SouthPan;    private javax.swing.JPanel grp_Pan_StatusPan;    private javax.swing.JTabbedPane grp_TPane_dispPane;    private javax.swing.JLabel jLabel11;    private javax.swing.JLabel jLabel13;    private javax.swing.JLabel jLabel2;    private javax.swing.JLabel jLabel3;    private javax.swing.JLabel jLabel7;    private javax.swing.JLabel jLabel8;    private javax.swing.JPanel jPanel2;    private javax.swing.JPanel jPanel3;    private javax.swing.JPanel jPanel4;    private javax.swing.JPanel jPanel5;    // End of variables declaration//GEN-END:variables    private MailInterface mail;    private ClientIndex grp_Pan_FournisseurIndex;}