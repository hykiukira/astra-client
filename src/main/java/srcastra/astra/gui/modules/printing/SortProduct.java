/* * SortProduct.java * * Created on 25 mars 2003, 9:27 */package srcastra.astra.gui.modules.printing;import javax.swing.*;import javax.swing.table.AbstractTableModel;import java.util.Vector;import srcastra.astra.gui.modules.mainScreenModule.DossierMainScreenModule;import srcastra.astra.sys.classetransfert.dossier.avion.*;import srcastra.astra.sys.classetransfert.dossier.*;import srcastra.astra.sys.classetransfert.dossier.assurance.*;import srcastra.astra.sys.classetransfert.dossier.brochure.*;import srcastra.astra.sys.classetransfert.dossier.hotel.*;import srcastra.astra.sys.classetransfert.dossier.bateau.*;import srcastra.astra.sys.classetransfert.dossier.train.*;import srcastra.astra.sys.classetransfert.dossier.voitureLocation.*;import srcastra.astra.sys.classetransfert.Loginusers_T;import java.util.*;/** * * @author  Thomas */public class SortProduct {         /** Creates a new instance of SortProduct */    DossierMainScreenModule parent;    ArrayList m_vector,m_vector2;    public SortProduct(DossierMainScreenModule parent) {        this.parent=parent;    }    private void fillVector(Hashtable hash,String name){         srcastra.astra.sys.classetransfert.dossier.ProduitAffichage prodaff = null;          if( hash !=null){             System.out.println("\n\n[*********]Taille de la table "+hash.size());                       for(Enumeration enu=hash.keys();enu.hasMoreElements();){               // produit_T prod =hash.get(enu.nextElement());                    m_vector.add(hash.get(enu.nextElement()));                }            }        }              public ArrayList loadData(){        m_vector=new ArrayList();        String tmp=null;        System.out.println("\n\n[*******]Ok je rentre dans le loadata ProduitTableModelGlobal");        Hashtable table = null;        Hashtable tmptable = null;        Sup_reduc_T tmpsupreduc = null;        srcastra.astra.sys.classetransfert.dossier.ProduitAffichage tmpProd = null;        srcastra.astra.sys.classetransfert.dossier.ProduitAffichage prodaff = null;        Hashtable fraisDossier=null;   /*     if(parent.getDossier().getFraisDossier()!=null){           fraisDossier=parent.getDossier().getFraisDossier();           for(Enumeration enum5=fraisDossier.keys();enum5.hasMoreElements();){              Frais_T frais=(Frais_T)fraisDossier.get(enum5.nextElement());               if(frais.getProduitaff()==null)                  frais.prepareAffichage();              m_vector.add(frais.getProduitaff());           }        }*/       fillVector(parent.getDossier().getAvionTicket(),ProduitAffichage.NAME_AVIATION);       fillVector(parent.getDossier().getAssurance(),ProduitAffichage.NAME_ASSURANCE);       fillVector(parent.getDossier().getBrochure(),ProduitAffichage.NAME_BROCHURE);          fillVector(parent.getDossier().getHotel(),ProduitAffichage.NAME_HOTEL);       fillVector(parent.getDossier().getBateau(),ProduitAffichage.NAME_BATEAU);       fillVector(parent.getDossier().getTrain(),ProduitAffichage.NAME_TRAIN);        fillVector(parent.getDossier().getVoitureLocation(),ProduitAffichage.NAME_VOITURE);         fillVector(parent.getDossier().getTaxi(),ProduitAffichage.NAME_TAXI);       fillVector(parent.getDossier().getCar(),ProduitAffichage.NAME_CAR);         fillVector(parent.getDossier().getDivers(),ProduitAffichage.NAME_DIV);         Collections.sort(m_vector,new srcastra.astra.gui.sys.comparator.ProduitDateComparator(0,true));       fillVector(parent.getDossier().getFraisDossier(),ProduitAffichage.NAME_CAR);       m_vector2=new ArrayList();        for(int p=0;p<m_vector.size();p++){        m_vector2.add(m_vector.get(p));        produit_T produit= (produit_T)m_vector.get(p);        if(produit.getSup_reduc()!=null) {                        tmptable = produit.getSup_reduc();                        for(Enumeration enum2=tmptable.keys();enum2.hasMoreElements();){                            tmpsupreduc=(Sup_reduc_T)produit.getSup_reduc().get(enum2.nextElement());                            if(!tmpsupreduc.isDeleted()){                                if(tmpsupreduc.getReduc()==1) tmp="-";                                else tmp="+";                                 String tmp2=tmpsupreduc.getGroupdec().getGntvainclusvente()==1?"INC":"N.INC";                                tmpProd=new  srcastra.astra.sys.classetransfert.dossier.ProduitAffichage(tmpsupreduc, tmp,produit.getFrnom(), produit.getGroupe_produit_nom(),produit.getTypeDeProduitNom(),"",tmpsupreduc.getFreeLibelle(),                                                             tmpsupreduc.getPrix(),tmpsupreduc.qua,tmpsupreduc.pax,tmpsupreduc.prct,"ok",tmpsupreduc.getValeur_tot(),                                                             produit.getAt_cleunik(), produit.getTypeDeProduitCleunik(),tmpsupreduc.getGroupdec().getValeurGenFloat1(),                                                             tmp2,tmpsupreduc.getValeur_tot_tva_inc());                                   tmpProd.setReducsup(true);                               // tmpProd.setStatus(gerestatut.getStatut(tmpsupreduc.getSup_statutCleuUnik()));                                if(tmpsupreduc.getGroupdec().getGnfrtvaComptabiliserVente()==0)                                            tmpProd.setM_tva(new srcastra.astra.sys.classetransfert.dossier.ColorData(new Double(0d)));                                m_vector2.add( tmpsupreduc);                             }                        }                    }         else            ; //Logger.getDefaultLogger().log(Logger.LOG_WARNING,"\nYO\nYO\nYOvaleur des sup null dans produittableglobal");        }        return m_vector2;    }    }