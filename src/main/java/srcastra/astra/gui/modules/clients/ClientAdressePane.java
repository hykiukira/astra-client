/* * ClientAdressePane.java * * Created on 19 juin 2002, 10:40 */package srcastra.astra.gui.modules.clients;import srcastra.astra.sys.classetransfert.Loginusers_T;import srcastra.astra.sys.rmi.astrainterface;import srcastra.astra.gui.modules.*;import srcastra.astra.gui.components.actions.actionToolBar.*;import srcastra.astra.gui.components.AstraComponent;import javax.swing.*;import srcastra.astra.gui.sys.ErreurScreenLibrary;import srcastra.astra.gui.sys.formVerification.*;import srcastra.astra.gui.components.InsertCombo.InsertCombo;import srcastra.astra.sys.classetransfert.clients.ClientsMultiAdresses_T;import srcastra.astra.sys.rmi.Exception.*;import srcastra.astra.gui.components.actions.ToolBarInteraction;import srcastra.astra.gui.sys.tableModel.listSelectorTableModel.*;import java.awt.event.ActionListener;import java.awt.event.ActionEvent;import srcastra.astra.gui.event.ValidateField;import srcastra.astra.gui.modules.Mailing.*;/** * @author Sébastien */public class ClientAdressePane extends javax.swing.JPanel implements InternScreenModule,        ToolBarComposer,        java.awt.event.ComponentListener, MailInterface {////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// CONSTRUCTOR////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////    /**     * Creates new form ClientAdressePane     */    public ClientAdressePane(srcastra.astra.sys.rmi.astrainterface serveur,                             srcastra.astra.sys.classetransfert.Loginusers_T currentUser,                             MainScreenModule parent, ActionToolBar actionToolBar) {        this.serveur = serveur;        this.currentUser = currentUser;        this.parent = parent;        this.actionToolBar = actionToolBar;        this.action = actionToolBar.ACT_READ;        setLastModify(-1);        this.addComponentListener(this);        new ManageMailingFrame((JComponent) this, this, parent.getSuperOwner(), srcastra.astra.sys.configuration.MainConfig.getMainConfig().getConfig());    }////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// INITIALISATION////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////    /**     * Initialise les champs graphiques ainsi qu'un tableau pour permettre d'interargir     * <p/>     * <p/>     * sur tous les éléments à partir d'une boucle.     * <p/>     * <p/>     * Les éléments graphiques et le tableau ne sera initialisé qu' 1 fois     */    private void init() {        if (!initOnce) {            // chargement des composants et de leurs propriétes            initComponents();            initComponent2();            setDocumentMask();            // chargement d'un tableau reprenant tous les éléments pour une correction            this.composantToVerif = new AstraComponent[]{                    grp_TField_Type, grp_TField_Nom, grp_TField_Adresse, grp_LSelect_CodePostal,                    grp_TField_localite, grp_LSelect_Pays, grp_TField_Email, grp_TField_Telephone,                    grp_TField_Fax, grp_TField_Gsm};            this.tb_interaction = new ToolBarInteraction(parent, this, composantToVerif);            tb_interaction.setValidateActionEnvironnement(ToolBarInteraction.ACT_ENV_STANDART);            tb_interaction.setEnvironnement(InsertCombo.ENVIRONNEMENT_PANEL_DATA);            //-> Régistration des listeners pour la validité des composants-----------------------------------------            for (int i = 0; i < composantToVerif.length; i++) {                composantToVerif[i].addActionListener(tb_interaction.getValidateActionListener());            }            grp_Combo_insertCombo.addInsertComboListener(tb_interaction.getChangeInsertComboDataActionListener());            //-------------------fin de la régistration des listeners dans les beans --------------------------------            // les éléments ne sont intialisé qu'1 seule fois            initOnce = true;            grp_TField_Gsm.addActionListener(validateAndDoPrevious);            initListe();        }    }    private void initListe() {        grp_LSelect_CodePostal.setServeur(parent.getServeur());        grp_LSelect_CodePostal.setLogin(parent.getCurrentUser());        grp_LSelect_CodePostal.setModel(new srcastra.astra.gui.components.combobox.liste.CpListeTableModel(parent.getServeur(), parent.getCurrentUser()));        grp_LSelect_CodePostal.init2();        grp_LSelect_Pays.setServeur(parent.getServeur());        grp_LSelect_Pays.setLogin(parent.getCurrentUser());        grp_LSelect_Pays.setModel(new srcastra.astra.gui.components.combobox.liste.PaysListeTableModel(parent.getServeur(), parent.getCurrentUser()));        grp_LSelect_Pays.init2();    }    private void setDocumentMask() {        grp_TField_Type.setDocument(new DefaultMask(1, 15, currentUser.getLangage(), DefaultMask.ALL_LETTRE_IN_UPPERCASE));        grp_TField_Nom.setDocument(new DefaultMask(1, 50, currentUser.getLangage(), DefaultMask.ALL_LETTRE_IN_UPPERCASE));        grp_TField_Adresse.setDocument(new DefaultMask(0, 50, currentUser.getLangage(), DefaultMask.ALL_LETTRE_IN_UPPERCASE));        grp_TField_localite.setDocument(new DefaultMask(0, 50, currentUser.getLangage(), DefaultMask.CASE_UNSENSITIVE));        grp_TField_Email.setDocument(new DefaultMask(0, 100, currentUser.getLangage(), DefaultMask.CASE_UNSENSITIVE));        grp_TField_Telephone.setDocument(new DefaultMask(0, 15, currentUser.getLangage(), DefaultMask.CASE_UNSENSITIVE));        grp_TField_Fax.setDocument(new DefaultMask(0, 15, currentUser.getLangage(), DefaultMask.CASE_UNSENSITIVE));        grp_TField_Gsm.setDocument(new DefaultMask(0, 15, currentUser.getLangage(), DefaultMask.CASE_UNSENSITIVE));    }    /**     * This method is called from within the constructor to     * <p/>     * <p/>     * initialize the form.     * <p/>     * <p/>     * WARNING: Do NOT modify this code. The content of this method is     * <p/>     * <p/>     * always regenerated by the Form Editor.     */    private void initComponents() {//GEN-BEGIN:initComponents        java.awt.GridBagConstraints gridBagConstraints;        jPanel1 = new javax.swing.JPanel();        grp_Pan_inserCombo = new javax.swing.JPanel();        jPanel3 = new javax.swing.JPanel();        jPanel4 = new javax.swing.JPanel();        jPanel7 = new javax.swing.JPanel();        jPanel9 = new javax.swing.JPanel();        jPanel10 = new javax.swing.JPanel();        grp_Label_Type = new javax.swing.JLabel();        grp_Label_Nom = new javax.swing.JLabel();        grp_Label_Adresse = new javax.swing.JLabel();        grp_Label_CodePostal = new javax.swing.JLabel();        grp_Label_Localite = new javax.swing.JLabel();        grp_Label_Pays = new javax.swing.JLabel();        grp_TField_localite = new srcastra.astra.gui.components.textFields.ATextField();        grp_TField_Type = new srcastra.astra.gui.components.textFields.ATextField();        grp_TField_Nom = new srcastra.astra.gui.components.textFields.ATextField();        grp_TField_Adresse = new srcastra.astra.gui.components.textFields.ATextField();        grp_LSelect_CodePostal = new srcastra.astra.gui.components.combobox.liste.Liste();        grp_LSelect_Pays = new srcastra.astra.gui.components.combobox.liste.Liste();        jPanel8 = new javax.swing.JPanel();        jPanel11 = new javax.swing.JPanel();        jPanel12 = new javax.swing.JPanel();        grp_Label_Email = new javax.swing.JLabel();        grp_Label_Telephone = new javax.swing.JLabel();        grp_Label_Fax = new javax.swing.JLabel();        grp_Label_Gsm = new javax.swing.JLabel();        grp_TField_Email = new srcastra.astra.gui.components.textFields.ATextField();        grp_TField_Telephone = new srcastra.astra.gui.components.textFields.ATextField();        grp_TField_Fax = new srcastra.astra.gui.components.textFields.ATextField();        grp_TField_Gsm = new srcastra.astra.gui.components.textFields.ATextField();        jPanel6 = new javax.swing.JPanel();        setLayout(new java.awt.BorderLayout());        setBorder(new javax.swing.border.TitledBorder(java.util.ResourceBundle.getBundle("srcastra.astra.locale.ModuleClient", currentUser.getLangage()).getString("CADR_TitrePane")));        jPanel1.setLayout(new java.awt.BorderLayout());        grp_Pan_inserCombo.setLayout(new java.awt.BorderLayout());        grp_Pan_inserCombo.setEnabled(false);        grp_Pan_inserCombo.add(jPanel3, java.awt.BorderLayout.NORTH);        jPanel1.add(grp_Pan_inserCombo, java.awt.BorderLayout.CENTER);        jPanel4.setLayout(new java.awt.GridLayout(1, 0));        jPanel4.setBorder(new javax.swing.border.EtchedBorder());        jPanel4.setMinimumSize(new java.awt.Dimension(184, 150));        jPanel4.setPreferredSize(new java.awt.Dimension(280, 147));        jPanel4.setEnabled(false);        jPanel7.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEFT));        jPanel10.setLayout(new java.awt.GridBagLayout());        grp_Label_Type.setFont(new java.awt.Font("Tahoma", 0, 10));        grp_Label_Type.setForeground(java.awt.Color.black);        grp_Label_Type.setText(java.util.ResourceBundle.getBundle("srcastra.astra.locale.ModuleClient", currentUser.getLangage()).getString("CADR_type"));        grp_Label_Type.setMinimumSize(new java.awt.Dimension(90, 14));        grp_Label_Type.setPreferredSize(new java.awt.Dimension(90, 14));        gridBagConstraints = new java.awt.GridBagConstraints();        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;        gridBagConstraints.insets = new java.awt.Insets(0, 0, 3, 3);        jPanel10.add(grp_Label_Type, gridBagConstraints);        grp_Label_Nom.setFont(new java.awt.Font("Tahoma", 0, 10));        grp_Label_Nom.setForeground(java.awt.Color.black);        grp_Label_Nom.setText(java.util.ResourceBundle.getBundle("srcastra.astra.locale.ModuleClient", currentUser.getLangage()).getString("CADR_Nom"));        grp_Label_Nom.setMinimumSize(new java.awt.Dimension(90, 14));        grp_Label_Nom.setPreferredSize(new java.awt.Dimension(90, 14));        gridBagConstraints = new java.awt.GridBagConstraints();        gridBagConstraints.gridx = 0;        gridBagConstraints.gridy = 1;        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;        gridBagConstraints.insets = new java.awt.Insets(0, 0, 3, 3);        jPanel10.add(grp_Label_Nom, gridBagConstraints);        grp_Label_Adresse.setFont(new java.awt.Font("Tahoma", 0, 10));        grp_Label_Adresse.setForeground(java.awt.Color.black);        grp_Label_Adresse.setText(java.util.ResourceBundle.getBundle("srcastra.astra.locale.ModuleClient", currentUser.getLangage()).getString("CADR_Adresse"));        grp_Label_Adresse.setMinimumSize(new java.awt.Dimension(90, 14));        grp_Label_Adresse.setPreferredSize(new java.awt.Dimension(90, 14));        gridBagConstraints = new java.awt.GridBagConstraints();        gridBagConstraints.gridx = 0;        gridBagConstraints.gridy = 2;        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;        gridBagConstraints.insets = new java.awt.Insets(0, 0, 3, 3);        jPanel10.add(grp_Label_Adresse, gridBagConstraints);        grp_Label_CodePostal.setFont(new java.awt.Font("Tahoma", 0, 10));        grp_Label_CodePostal.setForeground(java.awt.Color.black);        grp_Label_CodePostal.setText(java.util.ResourceBundle.getBundle("srcastra.astra.locale.ModuleClient", currentUser.getLangage()).getString("CADR_codePostal"));        grp_Label_CodePostal.setMinimumSize(new java.awt.Dimension(90, 14));        grp_Label_CodePostal.setPreferredSize(new java.awt.Dimension(90, 14));        gridBagConstraints = new java.awt.GridBagConstraints();        gridBagConstraints.gridx = 0;        gridBagConstraints.gridy = 3;        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;        gridBagConstraints.insets = new java.awt.Insets(0, 0, 3, 3);        jPanel10.add(grp_Label_CodePostal, gridBagConstraints);        grp_Label_Localite.setFont(new java.awt.Font("Tahoma", 0, 10));        grp_Label_Localite.setForeground(java.awt.Color.black);        grp_Label_Localite.setText(java.util.ResourceBundle.getBundle("srcastra.astra.locale.ModuleClient", currentUser.getLangage()).getString("CADR_Localite"));        grp_Label_Localite.setMinimumSize(new java.awt.Dimension(90, 14));        grp_Label_Localite.setPreferredSize(new java.awt.Dimension(90, 14));        gridBagConstraints = new java.awt.GridBagConstraints();        gridBagConstraints.gridx = 0;        gridBagConstraints.gridy = 4;        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;        gridBagConstraints.insets = new java.awt.Insets(0, 0, 3, 3);        jPanel10.add(grp_Label_Localite, gridBagConstraints);        grp_Label_Pays.setFont(new java.awt.Font("Tahoma", 0, 10));        grp_Label_Pays.setForeground(java.awt.Color.black);        grp_Label_Pays.setText(java.util.ResourceBundle.getBundle("srcastra.astra.locale.ModuleClient", currentUser.getLangage()).getString("CADR_Pays"));        grp_Label_Pays.setMinimumSize(new java.awt.Dimension(90, 14));        grp_Label_Pays.setPreferredSize(new java.awt.Dimension(90, 14));        gridBagConstraints = new java.awt.GridBagConstraints();        gridBagConstraints.gridx = 0;        gridBagConstraints.gridy = 5;        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;        gridBagConstraints.insets = new java.awt.Insets(0, 0, 3, 3);        jPanel10.add(grp_Label_Pays, gridBagConstraints);        grp_TField_localite.setEnabled(false);        grp_TField_localite.setMinimumSize(new java.awt.Dimension(170, 18));        grp_TField_localite.setPreferredSize(new java.awt.Dimension(170, 18));        grp_TField_localite.setWarningIcon(new javax.swing.ImageIcon(getClass().getResource("/srcastra/astra/gui/img/aTextfield/warning.gif")));        grp_TField_localite.setWorkingIcon(new javax.swing.ImageIcon(getClass().getResource("/srcastra/astra/gui/img/aTextfield/working.gif")));        gridBagConstraints = new java.awt.GridBagConstraints();        gridBagConstraints.gridx = 1;        gridBagConstraints.gridy = 4;        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;        gridBagConstraints.insets = new java.awt.Insets(0, 0, 3, 0);        jPanel10.add(grp_TField_localite, gridBagConstraints);        grp_TField_Type.setEnabled(false);        grp_TField_Type.setGrp_Comp_nextComponent(grp_TField_Nom);        grp_TField_Type.setGrp_Comp_previousComponent(null);        grp_TField_Type.setMinimumSize(new java.awt.Dimension(100, 18));        grp_TField_Type.setPreferredSize(new java.awt.Dimension(150, 18));        grp_TField_Type.setWarningIcon(new javax.swing.ImageIcon(getClass().getResource("/srcastra/astra/gui/img/aTextfield/warning.gif")));        grp_TField_Type.setWorkingIcon(new javax.swing.ImageIcon(getClass().getResource("/srcastra/astra/gui/img/aTextfield/working.gif")));        gridBagConstraints = new java.awt.GridBagConstraints();        gridBagConstraints.gridx = 1;        gridBagConstraints.gridy = 0;        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;        gridBagConstraints.insets = new java.awt.Insets(0, 0, 3, 0);        jPanel10.add(grp_TField_Type, gridBagConstraints);        grp_TField_Nom.setEnabled(false);        grp_TField_Nom.setGrp_Comp_nextComponent(grp_TField_Adresse);        grp_TField_Nom.setGrp_Comp_previousComponent(grp_TField_Type);        grp_TField_Nom.setMinimumSize(new java.awt.Dimension(230, 18));        grp_TField_Nom.setPreferredSize(new java.awt.Dimension(230, 18));        grp_TField_Nom.setWarningIcon(new javax.swing.ImageIcon(getClass().getResource("/srcastra/astra/gui/img/aTextfield/warning.gif")));        grp_TField_Nom.setWorkingIcon(new javax.swing.ImageIcon(getClass().getResource("/srcastra/astra/gui/img/aTextfield/working.gif")));        gridBagConstraints = new java.awt.GridBagConstraints();        gridBagConstraints.gridx = 1;        gridBagConstraints.gridy = 1;        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;        gridBagConstraints.insets = new java.awt.Insets(0, 0, 3, 0);        jPanel10.add(grp_TField_Nom, gridBagConstraints);        grp_TField_Adresse.setEnabled(false);        grp_TField_Adresse.setGrp_Comp_nextComponent(grp_LSelect_CodePostal);        grp_TField_Adresse.setGrp_Comp_previousComponent(grp_TField_Nom);        grp_TField_Adresse.setMinimumSize(new java.awt.Dimension(230, 18));        grp_TField_Adresse.setPreferredSize(new java.awt.Dimension(230, 18));        grp_TField_Adresse.setWarningIcon(new javax.swing.ImageIcon(getClass().getResource("/srcastra/astra/gui/img/aTextfield/warning.gif")));        grp_TField_Adresse.setWorkingIcon(new javax.swing.ImageIcon(getClass().getResource("/srcastra/astra/gui/img/aTextfield/working.gif")));        gridBagConstraints = new java.awt.GridBagConstraints();        gridBagConstraints.gridx = 1;        gridBagConstraints.gridy = 2;        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;        gridBagConstraints.insets = new java.awt.Insets(0, 0, 3, 0);        jPanel10.add(grp_TField_Adresse, gridBagConstraints);        grp_LSelect_CodePostal.setEnabled(false);        grp_LSelect_CodePostal.setGrp_Comp_nextComponent(grp_LSelect_Pays);        grp_LSelect_CodePostal.setUp(true);        grp_LSelect_CodePostal.setWarningIcon(new javax.swing.ImageIcon(getClass().getResource("/srcastra/astra/gui/img/aTextfield/warning.gif")));        grp_LSelect_CodePostal.setWorkingIcon(new javax.swing.ImageIcon(getClass().getResource("/srcastra/astra/gui/img/aTextfield/working.gif")));        gridBagConstraints = new java.awt.GridBagConstraints();        gridBagConstraints.gridx = 1;        gridBagConstraints.gridy = 3;        gridBagConstraints.insets = new java.awt.Insets(0, 0, 3, 0);        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;        jPanel10.add(grp_LSelect_CodePostal, gridBagConstraints);        grp_LSelect_Pays.setEnabled(false);        grp_LSelect_Pays.setGrp_Comp_nextComponent(grp_TField_Email);        grp_LSelect_Pays.setUp(true);        grp_LSelect_Pays.setWarningIcon(new javax.swing.ImageIcon(getClass().getResource("/srcastra/astra/gui/img/aTextfield/warning.gif")));        grp_LSelect_Pays.setWorkingIcon(new javax.swing.ImageIcon(getClass().getResource("/srcastra/astra/gui/img/aTextfield/working.gif")));        gridBagConstraints = new java.awt.GridBagConstraints();        gridBagConstraints.gridx = 1;        gridBagConstraints.gridy = 5;        gridBagConstraints.insets = new java.awt.Insets(0, 0, 3, 0);        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;        jPanel10.add(grp_LSelect_Pays, gridBagConstraints);        jPanel9.add(jPanel10);        jPanel7.add(jPanel9);        jPanel4.add(jPanel7);        jPanel8.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEFT));        jPanel12.setLayout(new java.awt.GridBagLayout());        grp_Label_Email.setFont(new java.awt.Font("Tahoma", 0, 10));        grp_Label_Email.setForeground(java.awt.Color.black);        grp_Label_Email.setText(java.util.ResourceBundle.getBundle("srcastra.astra.locale.ModuleClient", currentUser.getLangage()).getString("CADR_Email"));        grp_Label_Email.setMinimumSize(new java.awt.Dimension(90, 14));        grp_Label_Email.setPreferredSize(new java.awt.Dimension(90, 14));        gridBagConstraints = new java.awt.GridBagConstraints();        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;        gridBagConstraints.insets = new java.awt.Insets(0, 0, 3, 3);        jPanel12.add(grp_Label_Email, gridBagConstraints);        grp_Label_Telephone.setFont(new java.awt.Font("Tahoma", 0, 10));        grp_Label_Telephone.setForeground(java.awt.Color.black);        grp_Label_Telephone.setText(java.util.ResourceBundle.getBundle("srcastra.astra.locale.ModuleClient", currentUser.getLangage()).getString("CADR_Telephone"));        grp_Label_Telephone.setMinimumSize(new java.awt.Dimension(90, 14));        grp_Label_Telephone.setPreferredSize(new java.awt.Dimension(90, 14));        gridBagConstraints = new java.awt.GridBagConstraints();        gridBagConstraints.gridx = 0;        gridBagConstraints.gridy = 1;        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;        gridBagConstraints.insets = new java.awt.Insets(0, 0, 3, 3);        jPanel12.add(grp_Label_Telephone, gridBagConstraints);        grp_Label_Fax.setFont(new java.awt.Font("Tahoma", 0, 10));        grp_Label_Fax.setForeground(java.awt.Color.black);        grp_Label_Fax.setText(java.util.ResourceBundle.getBundle("srcastra.astra.locale.ModuleClient", currentUser.getLangage()).getString("CADR_Fax"));        grp_Label_Fax.setMinimumSize(new java.awt.Dimension(90, 14));        grp_Label_Fax.setPreferredSize(new java.awt.Dimension(90, 14));        gridBagConstraints = new java.awt.GridBagConstraints();        gridBagConstraints.gridx = 0;        gridBagConstraints.gridy = 2;        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;        gridBagConstraints.insets = new java.awt.Insets(0, 0, 3, 3);        jPanel12.add(grp_Label_Fax, gridBagConstraints);        grp_Label_Gsm.setFont(new java.awt.Font("Tahoma", 0, 10));        grp_Label_Gsm.setForeground(java.awt.Color.black);        grp_Label_Gsm.setText(java.util.ResourceBundle.getBundle("srcastra.astra.locale.ModuleClient", currentUser.getLangage()).getString("CADR_Gsm"));        grp_Label_Gsm.setMinimumSize(new java.awt.Dimension(90, 14));        grp_Label_Gsm.setPreferredSize(new java.awt.Dimension(90, 14));        gridBagConstraints = new java.awt.GridBagConstraints();        gridBagConstraints.gridx = 0;        gridBagConstraints.gridy = 3;        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;        gridBagConstraints.insets = new java.awt.Insets(0, 0, 3, 3);        jPanel12.add(grp_Label_Gsm, gridBagConstraints);        grp_TField_Email.setEnabled(false);        grp_TField_Email.setGrp_Comp_nextComponent(grp_TField_Telephone);        grp_TField_Email.setPreferredSize(new java.awt.Dimension(230, 18));        grp_TField_Email.setWarningIcon(new javax.swing.ImageIcon(getClass().getResource("/srcastra/astra/gui/img/aTextfield/warning.gif")));        grp_TField_Email.setWorkingIcon(new javax.swing.ImageIcon(getClass().getResource("/srcastra/astra/gui/img/aTextfield/working.gif")));        gridBagConstraints = new java.awt.GridBagConstraints();        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;        gridBagConstraints.insets = new java.awt.Insets(0, 0, 3, 0);        jPanel12.add(grp_TField_Email, gridBagConstraints);        grp_TField_Telephone.setEnabled(false);        grp_TField_Telephone.setGrp_Comp_nextComponent(grp_TField_Fax);        grp_TField_Telephone.setGrp_Comp_previousComponent(grp_TField_Email);        grp_TField_Telephone.setMinimumSize(new java.awt.Dimension(100, 18));        grp_TField_Telephone.setWarningIcon(new javax.swing.ImageIcon(getClass().getResource("/srcastra/astra/gui/img/aTextfield/warning.gif")));        grp_TField_Telephone.setWorkingIcon(new javax.swing.ImageIcon(getClass().getResource("/srcastra/astra/gui/img/aTextfield/working.gif")));        gridBagConstraints = new java.awt.GridBagConstraints();        gridBagConstraints.gridx = 1;        gridBagConstraints.gridy = 1;        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;        gridBagConstraints.insets = new java.awt.Insets(0, 0, 3, 0);        jPanel12.add(grp_TField_Telephone, gridBagConstraints);        grp_TField_Fax.setEnabled(false);        grp_TField_Fax.setGrp_Comp_nextComponent(grp_TField_Gsm);        grp_TField_Fax.setGrp_Comp_previousComponent(grp_TField_Telephone);        grp_TField_Fax.setMinimumSize(new java.awt.Dimension(100, 18));        grp_TField_Fax.setWarningIcon(new javax.swing.ImageIcon(getClass().getResource("/srcastra/astra/gui/img/aTextfield/warning.gif")));        grp_TField_Fax.setWorkingIcon(new javax.swing.ImageIcon(getClass().getResource("/srcastra/astra/gui/img/aTextfield/working.gif")));        gridBagConstraints = new java.awt.GridBagConstraints();        gridBagConstraints.gridx = 1;        gridBagConstraints.gridy = 2;        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;        gridBagConstraints.insets = new java.awt.Insets(0, 0, 3, 0);        jPanel12.add(grp_TField_Fax, gridBagConstraints);        grp_TField_Gsm.setEnabled(false);        grp_TField_Gsm.setGrp_Comp_nextComponent(null        );        grp_TField_Gsm.setGrp_Comp_previousComponent(grp_TField_Fax);        grp_TField_Gsm.setLastFocusedComponent(true);        grp_TField_Gsm.setMinimumSize(new java.awt.Dimension(100, 18));        grp_TField_Gsm.setWarningIcon(new javax.swing.ImageIcon(getClass().getResource("/srcastra/astra/gui/img/aTextfield/warning.gif")));        grp_TField_Gsm.setWorkingIcon(new javax.swing.ImageIcon(getClass().getResource("/srcastra/astra/gui/img/aTextfield/working.gif")));        gridBagConstraints = new java.awt.GridBagConstraints();        gridBagConstraints.gridx = 1;        gridBagConstraints.gridy = 3;        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;        gridBagConstraints.insets = new java.awt.Insets(0, 0, 3, 0);        jPanel12.add(grp_TField_Gsm, gridBagConstraints);        jPanel11.add(jPanel12);        jPanel8.add(jPanel11);        jPanel4.add(jPanel8);        jPanel1.add(jPanel4, java.awt.BorderLayout.SOUTH);        add(jPanel1, java.awt.BorderLayout.CENTER);        jPanel6.setEnabled(false);        add(jPanel6, java.awt.BorderLayout.SOUTH);    }//GEN-END:initComponents    private void initComponent2() {        try {            String[] titre = new String[]{"id",                    java.util.ResourceBundle.getBundle("srcastra/astra/locale/ModuleClient", currentUser.getLangage()).getString("CADR_type"),                    java.util.ResourceBundle.getBundle("srcastra/astra/locale/ModuleClient", currentUser.getLangage()).getString("CADR_Nom"),                    java.util.ResourceBundle.getBundle("srcastra/astra/locale/ModuleClient", currentUser.getLangage()).getString("CADR_Localite")};            grp_Combo_insertCombo = new InsertCombo(titre, 0, currentUser);            grp_Combo_insertCombo.setServeur(this.serveur);            grp_Combo_insertCombo.setTypeDeCombo(srcastra.astra.sys.rmi.astrainterface.COMBO_CLIENT_ADRESSES);            grp_Combo_insertCombo.setIParent(this);            grp_Combo_insertCombo.setEnvironnement(InsertCombo.ENVIRONNEMENT_PANEL_DATA);            grp_Pan_inserCombo.add(grp_Combo_insertCombo);        }        catch (java.util.MissingResourceException mre) {            ErreurScreenLibrary.displayErreur(this, ErreurScreenLibrary.MISSING_RESSOURCE_EXCEPTION, srcastra.astra.Astra.DEBUG, mre);        }    }////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// => LISTENERS////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////    public void componentResized(java.awt.event.ComponentEvent componentEvent) {    }    public void componentShown(java.awt.event.ComponentEvent componentEvent) {        actionToolBar.setTbComposer(this);        parent.setCurrentPanel(this);        switch (action) {            case ActionToolBar.ACT_READ:                displayReadMode();                break;        }    }    public void componentMoved(java.awt.event.ComponentEvent componentEvent) {    }    public void componentHidden(java.awt.event.ComponentEvent componentEvent) {    }    private ValidateField validateAndDoPrevious = new ValidateField() {        public void actionPerformed(ActionEvent evt) {            if (action == ActionToolBar.ACT_INSERT || action == ActionToolBar.ACT_MODIFY) {                requestFocus();                doPrevious();            }        }    };////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// => METHODE APPARENTE AU BEANS////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////    private void setToolBar(int sizeOfArray) {        /* if(sizeOfArray==0) {            parent.setCurrentActionEnabled(new int[]{ actionToolBar.DO_CREATE,                                                   actionToolBar.DO_CANCEL,                                                   actionToolBar.DO_DELETE });        }        else if(sizeOfArray>0) {            parent.setCurrentActionEnabled(new int[] { actionToolBar.DO_CREATE,                                                   actionToolBar.DO_MODIFY,                                                   actionToolBar.DO_CANCEL,                                                   actionToolBar.DO_DELETE });        }*/    }////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// => FONCTIONS APPARENTES AU TRANSFERT DE DONNEE////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////    public void chargeData() {        setToolBar(grp_Combo_insertCombo.getDataLenght());    }    /**     * Demande d'une modification au serveur     */    public void dbUpdate() {        // clientMultiAdress = new ClientsMultiAdresses_T();        //if(clientMultiAdress==null)        //clientMultiAdress.setCsmscleunik(clMultAdressCleUnik);        //clientMultiAdress.setCscleunik(this.clCleunik);        clientMultiAdress.setCsmstype(grp_TField_Type.getText());        clientMultiAdress.setCsmsnom(grp_TField_Nom.getText());        clientMultiAdress.setCsmsadresse(grp_TField_Adresse.getText());        // if(grp_LSelect_CodePostal.getCleUnik()!=0)        clientMultiAdress.setCxcleunik(grp_LSelect_CodePostal.getCleUnik());        clientMultiAdress.setCsmslocalite(grp_TField_localite.getText());        // if(grp_LSelect_Pays.getCleUnik()!=0)        clientMultiAdress.setPyscleunik(grp_LSelect_Pays.getCleUnik());        clientMultiAdress.setCsmstelephone(grp_TField_Telephone.getText());        clientMultiAdress.setCsmsfax(grp_TField_Fax.getText());        clientMultiAdress.setCsmsgsm(grp_TField_Gsm.getText());        clientMultiAdress.setCsmsmail(grp_TField_Email.getText());        try {            clientMultiAdress.updateObject(serveur, currentUser);            setLastModify(clientMultiAdress.getCsmscleunik());            displayReadMode();        }        catch (ServeurSqlFailure se) {            ErreurScreenLibrary.displayErreur(this, ErreurScreenLibrary.SERVEUR_SQL_FAILURE, srcastra.astra.Astra.DEBUG, se, this.currentUser);        }        catch (java.rmi.RemoteException re) {            ErreurScreenLibrary.displayErreur(this, ErreurScreenLibrary.REMOTE_EXCEPTION, srcastra.astra.Astra.DEBUG, re);        }        catch (Exception e) {            ErreurScreenLibrary.displayErreur(this, ErreurScreenLibrary.EXCEPTION, srcastra.astra.Astra.DEBUG, e);        }    }    /**     * Demande de sélection en vue d'une modification au serveur     */    public void dbSelectForUpdate() {        try {            clMultAdressCleUnik = clientMultiAdress.getCsmscleunik();            Object obj = clientMultiAdress.selectObjectForUpdate(serveur, currentUser, clMultAdressCleUnik);            clientMultiAdress = (srcastra.astra.sys.classetransfert.clients.ClientsMultiAdresses_T) obj;            updateAllFields();            checkValidity = true;        }        catch (ServeurSqlFailure se) {            ErreurScreenLibrary.displayErreur(this, ErreurScreenLibrary.SERVEUR_SQL_FAILURE, srcastra.astra.Astra.DEBUG, se, this.currentUser);            checkValidity = false;        }        catch (java.rmi.RemoteException re) {            ErreurScreenLibrary.displayErreur(this, ErreurScreenLibrary.REMOTE_EXCEPTION, srcastra.astra.Astra.DEBUG, re);            checkValidity = false;        }        catch (Exception e) {            ErreurScreenLibrary.displayErreur(this, ErreurScreenLibrary.EXCEPTION, srcastra.astra.Astra.DEBUG, e);            checkValidity = false;        }    }    /**     * Demande d'une suppression ou d'une annulation physique au serveur     */    public void dbDelete() {        int response = javax.swing.JOptionPane.showConfirmDialog(this, java.util.ResourceBundle.getBundle("srcastra/astra/locale/alertmessage", currentUser.getLangage()).getString("eff_cli_add"));        if (response == javax.swing.JOptionPane.YES_OPTION) {            try {                clientMultiAdress.deleteObject(serveur, currentUser);                for (int i = 0; i < composantToVerif.length; i++) {                    composantToVerif[i].setText("");                }            }            catch (ServeurSqlFailure se) {                ErreurScreenLibrary.displayErreur(this, ErreurScreenLibrary.SERVEUR_SQL_FAILURE, srcastra.astra.Astra.DEBUG, se, this.currentUser);            }            catch (java.rmi.RemoteException re) {                ErreurScreenLibrary.displayErreur(this, ErreurScreenLibrary.REMOTE_EXCEPTION, srcastra.astra.Astra.DEBUG, re);            }            catch (Exception e) {                ErreurScreenLibrary.displayErreur(this, ErreurScreenLibrary.EXCEPTION, srcastra.astra.Astra.DEBUG, e);            }            displayReadMode();            setLastModify(-1);        }    }    /**     * Demande d'une insertion au serveur     */    public void dbInsert() {        clientMultiAdress = new ClientsMultiAdresses_T();        clientMultiAdress.setCscleunik(this.clCleunik);        clientMultiAdress.setCsmstype(grp_TField_Type.getText());        clientMultiAdress.setCsmsnom(grp_TField_Nom.getText());        clientMultiAdress.setCsmsadresse(grp_TField_Adresse.getText());        clientMultiAdress.setCxcleunik(grp_LSelect_CodePostal.getCleUnik());        clientMultiAdress.setCsmslocalite(grp_TField_localite.getText());        clientMultiAdress.setPyscleunik(grp_LSelect_Pays.getCleUnik());        clientMultiAdress.setCsmstelephone(grp_TField_Telephone.getText());        clientMultiAdress.setCsmsfax(grp_TField_Fax.getText());        clientMultiAdress.setCsmsgsm(grp_TField_Gsm.getText());        clientMultiAdress.setCsmsmail(grp_TField_Email.getText());        try {            int key = clientMultiAdress.insertObject(serveur, currentUser, 0);            setLastModify(key);            displayReadMode();        }        catch (ServeurSqlFailure se) {            ErreurScreenLibrary.displayErreur(this, ErreurScreenLibrary.SERVEUR_SQL_FAILURE, srcastra.astra.Astra.DEBUG, se);        }        catch (java.rmi.RemoteException re) {            ErreurScreenLibrary.displayErreur(this, ErreurScreenLibrary.REMOTE_EXCEPTION, srcastra.astra.Astra.DEBUG, re);        }        catch (Exception e) {            ErreurScreenLibrary.displayErreur(this, ErreurScreenLibrary.EXCEPTION, srcastra.astra.Astra.DEBUG, e);        }    }    /**     * Demande de sélection au serveur     */    public void dbSelect() {        grp_Combo_insertCombo.setExtCleUnik(this.clCleunik);        grp_Combo_insertCombo.setValuefromParent(1, srcastra.astra.sys.rmi.astrainterface.COMBO_CLIENT_ADRESSES);        grp_Combo_insertCombo.chargeData(1);        grp_Combo_insertCombo.setModifyItem(getLastModify());        if (clientMultiAdress != null) setLastModify(clientMultiAdress.getCsmscleunik());        else setLastModify(-1);    }////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////    // => METHODE APPARENTE A L' AFFICHAGE DES DONNEES////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////    /**     * Affichage en mode Insertion     */    public void displayInsertMode() {        // toolbar        parent.setCurrentActionEnabled(new int[]{actionToolBar.DO_CANCEL});        // fin de toolbar        action = ActionToolBar.ACT_INSERT;        parent.enabledTabbedPane(false);        init();        for (int i = 0; i < composantToVerif.length; i++) {            composantToVerif[i].setEnabled(false);            composantToVerif[i].setText("");        }        grp_Combo_insertCombo.setEnabled(false);        grp_TField_Gsm.setLastFocusedComponent(true);        grp_TField_Type.setEnabled(true);        grp_TField_Type.requestFocus();    }    public void updateAllFields(Object donnee) {        clientMultiAdress = (srcastra.astra.sys.classetransfert.clients.ClientsMultiAdresses_T) donnee;        clMultAdressCleUnik = clientMultiAdress.getCsmscleunik();        updateAllFields();    }    /**     * Affichage en Mode disable     */    public void displayDisableMode() {    }    /**     * Méthode pour l'update de tous les champs     */    public void updateAllFields() {        grp_TField_Type.setText("" + clientMultiAdress.getCsmstype());        grp_TField_Nom.setText("" + clientMultiAdress.getCsmsnom());        grp_TField_Adresse.setText("" + clientMultiAdress.getCsmsadresse());        grp_LSelect_CodePostal.setCleUnik(clientMultiAdress.getCxcleunik());        //   grp_LSelect_CodePostal.setText(clientMultiAdress.getCodenom());        grp_TField_localite.setText("" + clientMultiAdress.getCsmslocalite());        grp_LSelect_Pays.setCleUnik(clientMultiAdress.getPyscleunik());        //     grp_LSelect_Pays.setText(clientMultiAdress.getPysnom());        grp_TField_Email.setText("" + clientMultiAdress.getCsmsmail());        grp_TField_Telephone.setText("" + clientMultiAdress.getCsmstelephone());        grp_TField_Fax.setText("" + clientMultiAdress.getCsmsfax());        grp_TField_Gsm.setText("" + clientMultiAdress.getCsmsgsm());    }    /**     * Affichage en mode Lecture     */    public void displayReadMode() {        // toolbar        parent.setCurrentActionEnabled(new int[0]);        action = actionToolBar.ACT_READ;        parent.enabledTabbedPane(true);        // fin de toolbar        init();        for (int i = 0; i < composantToVerif.length; i++) {            composantToVerif[i].setEnabled(false);            composantToVerif[i].setLastFocusedComponent(false);        }        grp_Combo_insertCombo.setEnabled(true);        this.requestFocus();        dbSelect();    }    /**     * Affichage en mode Modification     */    public void displayUpdateMode() {        // toolbar        dbSelectForUpdate();        if (!checkValidity)        {            displayReadMode();        } else {            parent.setCurrentActionEnabled(new int[]{actionToolBar.DO_PREVIOUS,                    actionToolBar.DO_CANCEL});            // fin de toolbar            this.action = actionToolBar.ACT_MODIFY;            parent.enabledTabbedPane(false);            for (int i = 0; i < composantToVerif.length; i++) {                composantToVerif[i].setEnabled(true);                composantToVerif[i].setLastFocusedComponent(true);            }            grp_Combo_insertCombo.setEnabled(false);            grp_TField_Type.requestFocus();        }    }////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// => METHODE APPARENTE AUX APPELS DE LA TOOLBAR////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////    public void doPrint() {    }    public void doDelete() {        dbDelete();    }    public void doClose() {    }    public void doModify() {        displayUpdateMode();    }    public void doNext() {    }    public void doCancel() {        switch (action) {            case ActionToolBar.ACT_READ:                parent.cancelModule();                break;            case ActionToolBar.ACT_INSERT:                displayReadMode();                break;            case ActionToolBar.ACT_MODIFY:                try {                    serveur.remoterollback(currentUser.getUrcleunik());                }                catch (java.rmi.RemoteException e)                {                    System.out.println("Exception dans remoterollback dans docancel fournisseurgénéralinfopane" + e.getMessage());                }                setLastModify(clientMultiAdress.getCsmscleunik());                displayReadMode();                break;        }    }    public void doCreate() {        displayInsertMode();    }    public void doHelp() {    }    public void doPrevious() {        switch (action) {            case ActionToolBar.ACT_INSERT:                dbInsert();                break;            case ActionToolBar.ACT_MODIFY:                dbUpdate();                break;        }    }    public void doAccept() {    }////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// => Champs de la classe////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////    private int action;    private ActionToolBar actionToolBar;    private boolean checkValidity = false;    private int clMultAdressCleUnik;    private srcastra.astra.sys.classetransfert.clients.ClientsMultiAdresses_T clientMultiAdress;    private AstraComponent[] composantToVerif;    private Loginusers_T currentUser;    /**     * pour 1 seul initiation du panneau     */    public boolean initOnce = false;    private MainScreenModule parent;    private astrainterface serveur;    private InsertCombo grp_Combo_insertCombo;    private int clCleunik;    private ToolBarInteraction tb_interaction;    private int lastModify;////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// STATIC VARIABLES////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////    /**     * numéro du panneau (cfr séquence)     */    public static int PANE_NUMBER = 0;////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// => Graphic Component////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////    // Variables declaration - do not modify//GEN-BEGIN:variables    private javax.swing.JLabel grp_Label_CodePostal;    private javax.swing.JLabel grp_Label_Gsm;    private javax.swing.JPanel jPanel4;    private javax.swing.JLabel grp_Label_Fax;    private srcastra.astra.gui.components.textFields.ATextField grp_TField_Nom;    private srcastra.astra.gui.components.combobox.liste.Liste grp_LSelect_CodePostal;    private srcastra.astra.gui.components.textFields.ATextField grp_TField_Gsm;    private javax.swing.JPanel jPanel3;    private javax.swing.JPanel jPanel10;    private srcastra.astra.gui.components.textFields.ATextField grp_TField_Type;    private javax.swing.JPanel jPanel11;    private srcastra.astra.gui.components.textFields.ATextField grp_TField_Adresse;    private javax.swing.JPanel jPanel12;    private javax.swing.JLabel grp_Label_Telephone;    private javax.swing.JLabel grp_Label_Email;    private javax.swing.JPanel grp_Pan_inserCombo;    private javax.swing.JPanel jPanel8;    private javax.swing.JLabel grp_Label_Pays;    private srcastra.astra.gui.components.textFields.ATextField grp_TField_localite;    private javax.swing.JPanel jPanel7;    private javax.swing.JPanel jPanel1;    private javax.swing.JPanel jPanel6;    private javax.swing.JLabel grp_Label_Nom;    private javax.swing.JLabel grp_Label_Localite;    private srcastra.astra.gui.components.combobox.liste.Liste grp_LSelect_Pays;    private srcastra.astra.gui.components.textFields.ATextField grp_TField_Email;    private srcastra.astra.gui.components.textFields.ATextField grp_TField_Fax;    private srcastra.astra.gui.components.textFields.ATextField grp_TField_Telephone;    private javax.swing.JLabel grp_Label_Type;    private javax.swing.JPanel jPanel9;    private javax.swing.JLabel grp_Label_Adresse;    // End of variables declaration//GEN-END:variables////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// BEANS PROPERTIES GET/SET SUPPORT////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////    /**     * Permet à la classe qui implémente cette méthode de se     * <p/>     * <p/>     * référencer auprès d' ActionToolBar     *     * @return le n° de l'action     */    public int getAction() {        return this.action;    }    public int[] getDefaultActionToolBarMask() {        return new int[0];    }    /**     * Permet de préciser le type d'action qu'on est occupé de faire :     * <p/>     * <p/>     * <p/>     * <p/>     * <p/>     * <p/>     * <p/>     * <p/>     * 0 pour lecture     * <p/>     * <p/>     * <p/>     * <p/>     * <p/>     * <p/>     * <p/>     * <p/>     * 1 pour création     * <p/>     * <p/>     * <p/>     * <p/>     * <p/>     * <p/>     * <p/>     * <p/>     * 2 pour modification     *     * @param action type d'action     */    public void setAction(int action) {    }    /**     * Permet de recevoir la clé unique d'un objet relatif     * <p/>     * <p/>     * <p/>     * <p/>     * <p/>     * <p/>     * <p/>     * <p/>     * au modules : création par partie ou modification     *     * @param frCleUnik la clé unique     */    public void setFrCleunik(int frCleUnik) {        this.clCleunik = frCleUnik;    }    /**     * Sert à recevoir le titre de son parent     * <p/>     * <p/>     * <p/>     * <p/>     * <p/>     * <p/>     * <p/>     * <p/>     * pour un cadre éventuel     *     * @return le titre du panneau     */    public String getTitle() {        try {            return java.util.ResourceBundle.getBundle("srcastra/astra/locale/ModuleClient", currentUser.getLangage()).getString("CADR_TitrePane");        }        catch (java.util.MissingResourceException mre) {            ErreurScreenLibrary.displayErreur(this, ErreurScreenLibrary.MISSING_RESSOURCE_EXCEPTION, srcastra.astra.Astra.DEBUG, mre);            return "";        }    }    /**     * Spécifie le composant qui implémente cette fonction comme     * <p/>     * <p/>     * le composant qui pilote l'actionToolBar     */    public void setThisAsToolBarComponent() {    }    /**     * Setter for property lastModify.     *     * @param lastModify New value of property lastModify.     */    public void setLastModify(int lastModify) {        this.lastModify = lastModify;    }    /**     * Getter for property lastModify.     *     * @return Value of property lastModify.     */    public int getLastModify() {        return lastModify;    }    public void doSwitch() {    }    public void goUp() {    }    public java.awt.Component m_getGeneriqueTable() {        return grp_Combo_insertCombo.getGrp_Table_Affiche();    }    public void doF10() {    }    /**     * Creates a new instance of MailInterface     */    public String[] getEmailAdres() {        return new String[]{grp_TField_Email.getText()};    }    public String getFormEntiteMail() {        return "";    }    public void addKeystroque() {    }    public Loginusers_T getUser() {        return parent.getCurrentUser();    }    public void doF7() {   }   }