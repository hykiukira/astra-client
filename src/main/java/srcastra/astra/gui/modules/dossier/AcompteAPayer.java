/*
 * DateFacturation.java
 *
 * Created on 12 juin 2006, 13:18
 */

package srcastra.astra.gui.modules.dossier;

import srcastra.astra.gui.modules.mainScreenModule.DossierMainScreenModule;
import srcastra.astra.sys.classetransfert.utils.*;

import javax.swing.*;
import java.awt.*;

/**
 * @author vincent
 */
public class AcompteAPayer extends java.awt.Dialog {

    /**
     * Creates new form DateFacturation
     */
    public AcompteAPayer(java.awt.Frame parent1, DossierMainScreenModule parent, boolean modal) {

        super(parent1, modal);
        this.parent = parent;

        initComponents();
        grp_Formated_payement.getGrp_JText_encode().setDocument(new srcastra.astra.gui.components.textFields.mask.Decimal(grp_Formated_payement.getGrp_JText_encode()));


        double val = parent.getDossier().getDrtaxe();

        if (val == -1)
            val = 0;
        else if (val == 0) {
            val = parent.getDossier().getDrprix() * 0.30;
            val = Math.round(val * 100) / 100;

        }

        //else


        grp_Formated_payement.setText(Double.toString(val));


        int x = parent1.getSize().width;

        int y = parent1.getSize().height;

        int largeur = 150;

        int hauteur = 300;

        int abscisse = x - largeur - 50;

        int ordonnee = 13 * y / 30;

        //this.setBounds(0,0, parent1.getSize().height/2,84);
        //setBounds(abscisse, ordonnee, largeur, hauteur);
        this.setLocation(this.getCenterPosition());
        //grp_Adate_payement.date(CalculDate.getTodayDate());

        java.awt.Component t[] = this.getComponents();

        // for (int i=0;i<t.length;i++)
        //     System.out.println(t[i].toString());

        //for (int i=0;i<this.)

        // ((srcastra.astra.gui.components.date.thedate.ADate)this.getComponent(0)).setDate(CalculDate.getTodayDate());

        //grp_Adate_payement.setDate(CalculDate.getTodayDate());


    }

    /**
     * This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    private void initComponents() {//GEN-BEGIN:initComponents
        label1 = new java.awt.Label();
        grp_Formated_payement = new srcastra.astra.gui.components.textFields.ATextField();
        button1 = new JButton();

        setLayout(new java.awt.GridLayout(3, 0));

        setBackground(java.awt.Color.white);
        setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));
        setLocationRelativeTo(null);
        addWindowListener(new java.awt.event.WindowAdapter() {
            public void windowClosing(java.awt.event.WindowEvent evt) {
                closeDialog(evt);
            }
        });

        label1.setAlignment(java.awt.Label.CENTER);
        label1.setBackground(java.awt.Color.pink);
        label1.setFont(new java.awt.Font("Arial", 1, 15));
        label1.setForeground(new java.awt.Color(51, 51, 51));
        label1.setText(java.util.ResourceBundle.getBundle("srcastra/astra/locale/compta").getString("acc"));
        add(label1);

        grp_Formated_payement.setGrp_Comp_nextComponent(button1);
        grp_Formated_payement.setPreferredSize(new java.awt.Dimension(80, 18));
        grp_Formated_payement.setWarningIcon(new javax.swing.ImageIcon(getClass().getResource("/srcastra/astra/gui/img/aTextfield/warning.gif")));
        grp_Formated_payement.setWorkingIcon(new javax.swing.ImageIcon(getClass().getResource("/srcastra/astra/gui/img/aTextfield/working.gif")));
        add(grp_Formated_payement);

        button1.setLabel("OK");
        button1.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                button1KeyPressed(evt);
            }
        });
        button1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                button1ActionPerformed(evt);
            }
        });

        add(button1);

        java.awt.Dimension screenSize = java.awt.Toolkit.getDefaultToolkit().getScreenSize();
        setBounds((screenSize.width - 377) / 2, (screenSize.height - 120) / 2, 377, 120);
    }//GEN-END:initComponents

    private void button1KeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_button1KeyPressed
        // TODO add your handling code here:

        int code = evt.getKeyCode();

//         if (code ==  evt.VK_ENTER)
        this.closeDialog(null);

    }//GEN-LAST:event_button1KeyPressed

    private void button1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_button1ActionPerformed
        // TODO add your handling code here:

        this.closeDialog(null);


    }//GEN-LAST:event_button1ActionPerformed

    /**
     * Closes the dialog
     */
    private void closeDialog(java.awt.event.WindowEvent evt) {//GEN-FIRST:event_closeDialog
        setVisible(false);
    }//GEN-LAST:event_closeDialog


    public double getAcompte() {
        double d = 0;
        try {
            d = Double.valueOf(this.grp_Formated_payement.getText()).doubleValue();
        } catch (Exception e) {
        }
        finally {
            if (d == 0)
                d = -1;


            return d;
        }

    }

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new DateFacturation(new java.awt.Frame(), null, true).setVisible(true);
            }
        });
    }

    private Point getCenterPosition() {


        Dimension dimProg = this.getSize();


        Dimension dimScreen = java.awt.Toolkit.getDefaultToolkit().getScreenSize();


        int Xp = (dimScreen.width - dimProg.width) / 2;


        int Yp = (dimScreen.height - dimProg.height) / 2;


        return new Point(Xp, Yp);


    }

    private DossierMainScreenModule parent;

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private JButton button1;
    private srcastra.astra.gui.components.textFields.ATextField grp_Formated_payement;
    private java.awt.Label label1;
    // End of variables declaration//GEN-END:variables

}
