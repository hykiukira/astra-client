/*
 * DateFacturation.java
 *
 * Created on 12 juin 2006, 13:18
 */

package srcastra.astra.gui.modules.dossier;

import srcastra.astra.gui.modules.mainScreenModule.DossierMainScreenModule;
import srcastra.astra.sys.classetransfert.utils.*;

import javax.swing.*;
import java.awt.*;

/**
 * @author vincent
 */
public class DateFacturation extends java.awt.Dialog {

    private boolean quit = true;

    /**
     * Creates new form DateFacturation
     */
    public DateFacturation(java.awt.Frame parent1, DossierMainScreenModule parent, boolean modal) {
        super(parent1, modal);
        this.parent = parent;

        initComponents();

        int x = parent1.getSize().width;

        int y = parent1.getSize().height;

        int largeur = 150;

        int hauteur = 300;

        int abscisse = x - largeur - 50;

        int ordonnee = 13 * y / 30;

        setBounds(abscisse, ordonnee, largeur, hauteur);
        this.setLocation(this.getCenterPosition());
        //grp_Adate_payement.date(CalculDate.getTodayDate());

        java.awt.Component t[] = this.getComponents();

        // for (int i=0;i<t.length;i++)
        //     System.out.println(t[i].toString());

        //for (int i=0;i<this.)

        ((srcastra.astra.gui.components.date.thedate.ADate) this.getComponent(0)).setDate(CalculDate.getTodayDate());

        //grp_Adate_payement.setDate(CalculDate.getTodayDate());


    }

    /**
     * This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    private void initComponents() {//GEN-BEGIN:initComponents
        srcastra.astra.gui.components.date.thedate.ADate grp_Adate_payement;

        button2 = new JButton();
        grp_Adate_payement = new srcastra.astra.gui.components.date.thedate.ADate();
        button1 = new JButton();
        label1 = new JLabel();

        button2.setText("button2");

        addWindowListener(new java.awt.event.WindowAdapter() {
            public void windowClosing(java.awt.event.WindowEvent evt) {
                closeDialog(evt);
            }
        });

        grp_Adate_payement.setCheckUptodate(true);
        grp_Adate_payement.setGrp_Comp_nextComponent(button1);
        grp_Adate_payement.setText("");
        grp_Adate_payement.setUser(parent.getCurrentUser());
        grp_Adate_payement.setWarningIcon(new javax.swing.ImageIcon(getClass().getResource("/srcastra/astra/gui/img/aTextfield/warning.gif")));
        grp_Adate_payement.setWorkingIcon(new javax.swing.ImageIcon(getClass().getResource("/srcastra/astra/gui/img/aTextfield/working.gif")));
        grp_Adate_payement.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                grp_Adate_payementActionPerformed(evt);
            }
        });

        add(grp_Adate_payement, java.awt.BorderLayout.CENTER);

        button1.setLabel("OK");
        button1.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                button1KeyPressed(evt);
            }
        });
        button1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                button1ActionPerformed(evt);
            }
        });

        add(button1, java.awt.BorderLayout.SOUTH);

        //label1.setAlignment(java.awt.Label.CENTER);
        label1.setText(java.util.ResourceBundle.getBundle("srcastra/astra/locale/compta").getString("fd"));
        add(label1, java.awt.BorderLayout.NORTH);

        pack();
    }//GEN-END:initComponents

    private void button1KeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_button1KeyPressed
        // TODO add your handling code here:

        int code = evt.getKeyCode();

//         if (code ==  evt.VK_ENTER)
        quit = false;

        this.closeDialog(null);


    }//GEN-LAST:event_button1KeyPressed

    private void grp_Adate_payementActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_grp_Adate_payementActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_grp_Adate_payementActionPerformed

    private void button1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_button1ActionPerformed
        // TODO add your handling code here:
        quit = false;

        this.closeDialog(null);


    }//GEN-LAST:event_button1ActionPerformed

    /**
     * Closes the dialog
     */
    private void closeDialog(java.awt.event.WindowEvent evt) {//GEN-FIRST:event_closeDialog


        Date d = ((srcastra.astra.gui.components.date.thedate.ADate) this.getComponent(0)).getDate();

        System.out.println(d.getDay() + " " + d.getMonth() + " " + d.getYear());

        //CalculDate.verifyUptodateDate(d);

        if (!d.isOpen() && !d.isUnknow()) {
            setVisible(false);

            //dispose();
        }
    }//GEN-LAST:event_closeDialog

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new DateFacturation(new java.awt.Frame(), null, true).setVisible(true);
            }
        });
    }

    public boolean getQuit() {

        return this.quit;

    }

    private Point getCenterPosition() {


        Dimension dimProg = this.getSize();


        Dimension dimScreen = java.awt.Toolkit.getDefaultToolkit().getScreenSize();


        int Xp = (dimScreen.width - dimProg.width) / 2;


        int Yp = (dimScreen.height - dimProg.height) / 2;


        return new Point(Xp, Yp);


    }

    private DossierMainScreenModule parent;

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private JButton button1;
    private JButton button2;
    private JLabel label1;
    // End of variables declaration//GEN-END:variables

}
