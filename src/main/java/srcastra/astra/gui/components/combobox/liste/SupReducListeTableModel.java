/* * TransportTableModel.java * * Created on 20 novembre 2002, 14:22 */package srcastra.astra.gui.components.combobox.liste;import srcastra.astra.gui.modules.*;import srcastra.astra.gui.MainFrame;import srcastra.astra.sys.rmi.astrainterface;import srcastra.astra.sys.classetransfert.Loginusers_T;import java.util.ArrayList;import srcastra.astra.Astra;import java.rmi.RemoteException;import srcastra.astra.gui.sys.ErreurScreenLibrary;import srcastra.astra.gui.sys.formVerification.ListSelectorMask;import srcastra.astra.gui.sys.tableModel.AbstractAstraTableModel;import srcastra.astra.gui.sys.ErreurScreenLibrary;import srcastra.astra.gui.test.*;import srcastra.astra.sys.rmi.astrainterface;import srcastra.astra.sys.classetransfert.clients.Clients_T;import srcastra.astra.sys.classetransfert.Loginusers_T;import java.util.ArrayList;import srcastra.astra.Astra;import java.rmi.RemoteException;import srcastra.astra.gui.sys.ErreurScreenLibrary;import srcastra.astra.gui.sys.formVerification.ListSelectorMask;import srcastra.astra.sys.Logger;import srcastra.astra.sys.rmi.Exception.ServeurSqlFailure;import srcastra.astra.sys.manipuleclient.ClientConstante;import srcastra.astra.gui.sys.tableModel.AbstractAstraTableModel;import srcastra.astra.gui.sys.ErreurScreenLibrary;import srcastra.astra.sys.classetransfert.dossier.ProduitAffichage;import javax.swing.*;import java.util.*;import java.awt.Component;import javax.swing.table.AbstractTableModel;import srcastra.astra.gui.sys.comparator.ListeSelectorComparaTor2;import srcastra.astra.gui.modules.aidedesicion.*;import srcastra.astra.gui.components.actions.actionToolBar.*;import srcastra.astra.gui.sys.comparator.*;import srcastra.astra.gui.modules.mainScreenModule.DossierMainScreenModule;/** * @author Thomas */public class SupReducListeTableModel extends ListeTableModel implements ListeModelInterface {    /**     * Creates a new instance of TransportTableModel     */    int m_typeProduit;    MainScreenModule m_parent;    int typeDecision;    Hashtable table;    int langue;    public SupReducListeTableModel(astrainterface serveur, Loginusers_T login, int typeProduit, MainScreenModule parent, int typeDecision, Hashtable table) {        super(serveur, login, true);        m_parent = parent;        m_typeProduit = typeProduit;        this.typeDecision = typeDecision;        this.table = table;        this.langue = login.getUrlmcleunik();        loadata();    }    public SupReducListeTableModel(astrainterface serveur, Loginusers_T login, int typeProduit, MainScreenModule parent, int typeDecision, Hashtable table, int clientlangue) {        super(serveur, login, true);        m_parent = parent;        m_typeProduit = typeProduit;        this.typeDecision = typeDecision;        this.table = table;        this.langue = clientlangue;        loadata();    }    public ArrayList loadata() {        try {            Object tmpHash = table.get(new Integer(m_typeProduit));            //   if(tmpHash==null || tmpHash.equals("vide")){            m_vector = new ArrayList();            DecBuffer dectree = (DecBuffer) m_serveur.workWithDecision(null, m_login.getUrcleunik(), ActionToolBar.ACT_READ, null, 0, 0, 0l, typeDecision);            m_vector = (ArrayList) dectree.getArrays(this.langue).get(new Integer(m_typeProduit));            if (m_vector != null)                Collections.sort(m_vector, new ListeSelectorComparaTor(3, true));            return m_vector;            /*  m_vector=dectree.fillVectorListe(m_vector,m_typeProduit,langue);       if(m_vector!=null){           Collections.sort(m_vector,new ListeSelectorComparaTor(3,true));           table.put(new Integer(m_typeProduit),m_vector);       }else           table.put(new Integer(m_typeProduit),"vide");*/            //}            // else{            // m_vector=(ArrayList)table.get(new Integer(m_typeProduit));            // }            //     return m_vector;        }        catch (srcastra.astra.sys.rmi.Exception.ServeurSqlFailure se) {            se.printStackTrace();        }        catch (java.rmi.RemoteException re) {            re.printStackTrace();        }        return null;    }    public srcastra.astra.gui.test.ColumnData[] getM_column() {        return this.m_columns;    }    public void setM_column(srcastra.astra.gui.test.ColumnData[] m_column) {        this.m_columns = m_column;    }    public java.util.ArrayList getM_vector() {        return m_vector;    }    public void setM_vector(java.util.ArrayList m_vector) {        this.m_vector = m_vector;    }    public String getColumnName(int column) {        return m_columns[column].c_title;    }    public java.util.ArrayList getM_vector_by_key() {        return m_vector_by_key;    }    public void setM_vector_by_key(java.util.ArrayList m_vector_by_key) {        this.m_vector_by_key = m_vector_by_key;    }    public Object getValueAt(int row2, int col) {        Object[] row = (Object[]) m_vector.get(row2);        // for(int p=0;p<row.length;p++)        //    System.out.println("[*********************]ligne "+p+"  "+row[p].toString()+" ");        int size = row.length - 1;        switch (col) {            //case 0:return new srcastra.astra.gui.components.combobox.liste.RowColorListe(row[3],((Integer)row[size]).intValue());            case 0:                return new srcastra.astra.gui.components.combobox.liste.RowColorListe(row[3], 0);        }        return "";    }    public int getColumnCount() {        return m_columns.length;    }    ColumnData[] m_columns = new ColumnData[]{            new ColumnData("Intitule", 10, JLabel.LEFT)};}