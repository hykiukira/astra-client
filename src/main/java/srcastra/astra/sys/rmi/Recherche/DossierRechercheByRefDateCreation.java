/* * DossierRechercheByNumdos.java * * Created on 2 december 2002, 14:58 */package srcastra.astra.sys.rmi.Recherche;import srcastra.astra.sys.classetransfert.dossier.*;import srcastra.astra.sys.classetransfert.dossier.avion.*;import java.sql.*;import srcastra.astra.sys.rmi.astraimplement;import srcastra.astra.sys.rmi.utils.Poolconnection;import java.rmi.*;import srcastra.astra.sys.Transaction;import srcastra.astra.sys.Logger;import java.util.ArrayList;import java.util.Hashtable;import srcastra.astra.sys.classetransfert.utils.Date;import srcastra.astra.sys.classetransfert.clients.*;import srcastra.astra.sys.classetransfert.Loginusers_T;import srcastra.astra.sys.rmi.Exception.*; import srcastra.astra.sys.produit.*;import srcastra.astra.sys.compta.*;import srcastra.astra.sys.rmi.*;  import srcastra.astra.sys.compress.*;/** * * @author  Thomas */public class DossierRechercheByRefDateCreation extends DossierRecherche implements InterfaceRecherche  {    /** Creates a new instance of DossierRechercheByNumdos */    public DossierRechercheByRefDateCreation(astraimplement serveur2) {        super(serveur2);    }        public ArrayList chargeDossierRecherche(Loginusers_T currentUser, int cleRecherche, String numdos,Poolconnection tmpool,int cas) throws SQLException,RemoteException{        //  Poolconnection tmpool=serveur2.getConnectionAndCheck(currentUser.getUrcleunik(),true);     Dossier_T dossier;     System.out.println("[WAAAAAAAAAAAAAAAAAAAAAAZZZZZAAAAAAAAAAAAAAAAAA**************]je rentre dans chargedossier");     ArrayList returnvalue=new ArrayList();     String requete="SELECT d.dr_cleunik,d.dr_numdos,d.dr_date_depart,d.po,d.destination,d.hotel,d.dr_status,d.client,d.fournisseur,d.dr_totalprix,d.dr_facture, d.dr_paye FROM dossier d,user u WHERE  d.urcleunik=u.urcleunik AND  u.eecleunik=? AND dr_annull=0 AND dr_datetimecrea LIKE(CONCAT(?,'%')) ORDER BY d.dr_numdos;";     System.out.println("numdos"+numdos);     CompressArray myArray=null;     try{   numdos=numdos.substring(0,10);            PreparedStatement pstmt=tmpool.getConuser().prepareStatement(requete);            pstmt.setInt(1,currentUser.getUreecleunik());            pstmt.setString(2,numdos);            ResultSet result=pstmt.executeQuery();            myArray=new CompressArray();            myArray.Compress_from_resulset(result);       }catch(SQLException se){         se.printStackTrace();           Transaction.rollback(tmpool.getConuser());       }              return myArray;    }        public ArrayList chargeDossierRecherche(Loginusers_T currentUser, int cleRecherche, String numdos, Poolconnection tmpool, int cas, String numfact, String numnc, String numfactfourn, int nonfacture, ArrayList order) throws SQLException, RemoteException {        return null;    }        }