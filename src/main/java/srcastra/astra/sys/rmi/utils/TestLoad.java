/* * TestLoad.java * * Created on 5 décembre 2003, 11:56 */package srcastra.astra.sys.rmi.utils;import java.util.*;import srcastra.astra.sys.classetransfert.dossier.*;import srcastra.test.*;/** * * @author  Thomas */public class TestLoad extends javax.swing.JFrame {        /** Creates new form TestLoad */    ArrayList threads;    Object syn;    LockObject obj;    LockObject obj2;    Hashtable dossierH;    public TestLoad() {        dossierH=new Hashtable();        threads=new ArrayList();             initComponents();        obj=new LockObject();        System.out.println("lock");        new ServeurProducer(obj).start();        System.out.println("unlock");            }     public synchronized java.lang.Object getSyn() {          try{                      wait();        }catch(java.lang.InterruptedException in){                    }             return null;    }        /** Setter for property syn.     * @param syn New value of property syn.     *     */    public synchronized void setSyn() {                    notifyAll();              }        /** This method is called from within the constructor to     * initialize the form.     * WARNING: Do NOT modify this code. The content of this method is     * always regenerated by the Form Editor.     */    private void initComponents() {//GEN-BEGIN:initComponents        jButton1 = new javax.swing.JButton();        jButton2 = new javax.swing.JButton();        jButton3 = new javax.swing.JButton();        jButton4 = new javax.swing.JButton();        jButton5 = new javax.swing.JButton();        jButton6 = new javax.swing.JButton();        jButton7 = new javax.swing.JButton();        jButton8 = new javax.swing.JButton();        getContentPane().setLayout(new java.awt.FlowLayout());        addWindowListener(new java.awt.event.WindowAdapter() {            public void windowClosing(java.awt.event.WindowEvent evt) {                exitForm(evt);            }        });        jButton1.setText("Insert");        jButton1.addActionListener(new java.awt.event.ActionListener() {            public void actionPerformed(java.awt.event.ActionEvent evt) {                jButton1ActionPerformed(evt);            }        });        getContentPane().add(jButton1);        jButton2.setText("Writeinserted");        jButton2.addActionListener(new java.awt.event.ActionListener() {            public void actionPerformed(java.awt.event.ActionEvent evt) {                jButton2ActionPerformed(evt);            }        });        getContentPane().add(jButton2);        jButton3.setText("SetFacture");        jButton3.addActionListener(new java.awt.event.ActionListener() {            public void actionPerformed(java.awt.event.ActionEvent evt) {                jButton3ActionPerformed(evt);            }        });        getContentPane().add(jButton3);        jButton4.setText("first insert");        jButton4.addActionListener(new java.awt.event.ActionListener() {            public void actionPerformed(java.awt.event.ActionEvent evt) {                jButton4ActionPerformed(evt);            }        });        getContentPane().add(jButton4);        jButton5.setText("NC");        jButton5.addActionListener(new java.awt.event.ActionListener() {            public void actionPerformed(java.awt.event.ActionEvent evt) {                jButton5ActionPerformed(evt);            }        });        getContentPane().add(jButton5);        jButton6.setText("Write facture");        jButton6.addActionListener(new java.awt.event.ActionListener() {            public void actionPerformed(java.awt.event.ActionEvent evt) {                jButton6ActionPerformed(evt);            }        });        getContentPane().add(jButton6);        jButton7.setText("jButton7");        jButton7.addActionListener(new java.awt.event.ActionListener() {            public void actionPerformed(java.awt.event.ActionEvent evt) {                jButton7ActionPerformed(evt);            }        });        getContentPane().add(jButton7);        jButton8.setText("test solde");        jButton8.addActionListener(new java.awt.event.ActionListener() {            public void actionPerformed(java.awt.event.ActionEvent evt) {                jButton8ActionPerformed(evt);            }        });        getContentPane().add(jButton8);        java.awt.Dimension screenSize = java.awt.Toolkit.getDefaultToolkit().getScreenSize();        setBounds((screenSize.width-400)/2, (screenSize.height-300)/2, 400, 300);    }//GEN-END:initComponents    private void jButton8ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton8ActionPerformed       try{            ServeurConnect connect;            connect=new ServeurConnect();            connect.connectServeur("ADMIN","ADMIN");            double solde=connect.serveur2.renvDossierRmiObject(connect.tmpgestion2.getUrcleunik()).checkSoldeComptaBle(connect.tmpgestion2.getUrcleunik());            System.out.println("solde "+solde);       }catch(srcastra.astra.sys.rmi.Exception.ServeurSqlFailure se){          se.printStackTrace();                   }catch(java.rmi.RemoteException rn){          rn.printStackTrace();                   }    }//GEN-LAST:event_jButton8ActionPerformed    private void jButton7ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton7ActionPerformed        // try{            test t=new test();            threads.add(new FonctionIntegrity(1,2,1,t,obj));            threads.add(new FonctionIntegrity(4,5,2,t,obj));            threads.add(new FonctionIntegrity(7,8,3,t,obj));            threads.add(new FonctionIntegrity(9,10,4,t,obj));            threads.add(new FonctionIntegrity(11,12,5,t,obj));            threads.add(new FonctionIntegrity(12,13,6,t,obj));            threads.add(new FonctionIntegrity(13,14,7,t,obj));            threads.add(new FonctionIntegrity(15,16,8,t,obj));            threads.add(new FonctionIntegrity(17,18,9,t,obj));            threads.add(new FonctionIntegrity(19,20,10,t,obj));            threads.add(new FonctionIntegrity(21,22,11,t,obj));            threads.add(new FonctionIntegrity(23,24,12,t,obj));            threads.add(new FonctionIntegrity(25,26,13,t,obj));            threads.add(new FonctionIntegrity(27,28,14,t,obj));            threads.add(new FonctionIntegrity(29,30,15,t,obj));            threads.add(new FonctionIntegrity(31,32,16,t,obj));            threads.add(new FonctionIntegrity(33,34,17,t,obj));            threads.add(new FonctionIntegrity(35,36,18,t,obj));            threads.add(new FonctionIntegrity(37,38,19,t,obj));            threads.add(new FonctionIntegrity(39,40,20,t,obj));                       for(int i=0;i<threads.size();i++){               ((FonctionIntegrity)threads.get(i)).start();            }      /*   }catch(java.io.IOException in){                in.printStackTrace();            }         catch(ClassNotFoundException cn){                 cn.printStackTrace();   */      //   }    }//GEN-LAST:event_jButton7ActionPerformed    private void jButton6ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton6ActionPerformed        try{            System.out.println("dossierHSize "+dossierH.size());        for(Enumeration enu=dossierH.keys();enu.hasMoreElements();){          Dossier_T dossier=(Dossier_T)dossierH.get(enu.nextElement());          new srcastra.astra.sys.rmi.utils.SerializeDossier().serialiseDossierFacture(dossier);        // Add your handling code here:        }        }catch(java.io.IOException in){     in.printStackTrace();       }    catch(ClassNotFoundException cn){     cn.printStackTrace();       }    }//GEN-LAST:event_jButton6ActionPerformed    private void jButton5ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton5ActionPerformed        try{            ArrayList dossier=new SerializeDossier().getArrayFacture();            ArrayList threads=new ArrayList();            threads.add(new ncDossierTread("ADMIN", "ADMIN", dossier,obj,1,dossierH,2,10));            threads.add(new ncDossierTread("ADMIN", "ADMIN", dossier,obj,2,dossierH,6,10));            threads.add(new ncDossierTread("ADMIN", "ADMIN", dossier,obj,3,dossierH,11,15));            threads.add(new ncDossierTread("ADMIN", "ADMIN", dossier,obj,4,dossierH,16,19));            threads.add(new ncDossierTread("ADMIN", "ADMIN", dossier,obj,4,dossierH,20,27));            for(int i=0;i<threads.size();i++){               ((ncDossierTread)threads.get(i)).start();            }         }catch(java.io.IOException in){                in.printStackTrace();            }         catch(ClassNotFoundException cn){                 cn.printStackTrace();            }    }//GEN-LAST:event_jButton5ActionPerformed    private void jButton4ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton4ActionPerformed    try{            ArrayList dossier=new SerializeDossier().getArray();            threads.add(new LoadDossierTread("ADMIN", "ADMIN", dossier,obj,1,dossierH));            threads.add(new LoadDossierTread("ADMIN", "ADMIN", dossier,obj,2,dossierH));            threads.add(new LoadDossierTread("ADMIN", "ADMIN", dossier,obj,3,dossierH));            threads.add(new LoadDossierTread("ADMIN", "ADMIN", dossier,obj,4,dossierH));            for(int i=0;i<threads.size();i++){               ((LoadDossierTread)threads.get(i)).start();            }         }catch(java.io.IOException in){                in.printStackTrace();            }         catch(ClassNotFoundException cn){                 cn.printStackTrace();            }        // Add your handling code here:    }//GEN-LAST:event_jButton4ActionPerformed    private void jButton3ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton3ActionPerformed        try{            ArrayList dossier=new SerializeDossier().getArrayInserted();            ArrayList threads=new ArrayList();            dossierH=new Hashtable();            System.out.println("dossier a facture size "+dossier.size());            threads.add(new FactureDossierTread("ADMIN", "ADMIN", dossier,obj,1,dossierH,0,5));            threads.add(new FactureDossierTread("ADMIN", "ADMIN", dossier,obj,2,dossierH,6,10));            threads.add(new FactureDossierTread("ADMIN", "ADMIN", dossier,obj,3,dossierH,11,15));            threads.add(new FactureDossierTread("ADMIN", "ADMIN", dossier,obj,4,dossierH,16,19));            threads.add(new FactureDossierTread("ADMIN", "ADMIN", dossier,obj,4,dossierH,20,27));            for(int i=0;i<threads.size();i++){               ((FactureDossierTread)threads.get(i)).start();            }         }catch(java.io.IOException in){                in.printStackTrace();            }         catch(ClassNotFoundException cn){                 cn.printStackTrace();            }    }//GEN-LAST:event_jButton3ActionPerformed    private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton2ActionPerformed        try{        for(Enumeration enu=dossierH.keys();enu.hasMoreElements();){          Dossier_T dossier=(Dossier_T)dossierH.get(enu.nextElement());          new srcastra.astra.sys.rmi.utils.SerializeDossier().serialiseDossierInserted(dossier);        // Add your handling code here:        }        }catch(java.io.IOException in){     in.printStackTrace();       }    catch(ClassNotFoundException cn){     cn.printStackTrace();       }            }//GEN-LAST:event_jButton2ActionPerformed    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton1ActionPerformed    obj.setSyn();   // Add your handling code here:    }//GEN-LAST:event_jButton1ActionPerformed        /** Exit the Application */    private void exitForm(java.awt.event.WindowEvent evt) {//GEN-FIRST:event_exitForm        System.exit(0);    }//GEN-LAST:event_exitForm        /**     * @param args the command line arguments     */    public static void main(String args[]) {        new TestLoad().show();    }            // Variables declaration - do not modify//GEN-BEGIN:variables    private javax.swing.JButton jButton1;    private javax.swing.JButton jButton2;    private javax.swing.JButton jButton3;    private javax.swing.JButton jButton4;    private javax.swing.JButton jButton5;    private javax.swing.JButton jButton6;    private javax.swing.JButton jButton7;    private javax.swing.JButton jButton8;    // End of variables declaration//GEN-END:variables    }