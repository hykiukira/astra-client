/*

 * CheckSumCompta.java

 *

 * Created on 12 février 2003, 14:47

 */



package srcastra.astra.sys.compta;

import java.util.*;

import javax.swing.table.*;



/**

 *

 * @author  thomas

 */

public class PCheckSumCompta extends javax.swing.JPanel {

    

    /** Creates new form CheckSumCompta */

    public PCheckSumCompta(srcastra.astra.sys.compta.CheckSum_T check) {

        initComponents();

       // ArrayList test=new ArrayList();

        //test.add(new Object[]{"70000000000000","200.23","        ","nouveau dossier"});

        initTable( check.getArray());
        calculDebitCredit();

    }

    private void initTable(ArrayList array){

        model = new CheckSumComptaTableModel();

        model.retrieveData(array);

        jTable1.setAutoCreateColumnsFromModel(false);

        jTable1.setModel(model);

        jTable1.getTableHeader().setReorderingAllowed(false);

        jTable1.setSelectionMode(javax.swing.ListSelectionModel.SINGLE_SELECTION);

        

        for(int i=0; i < model.getColumnCount(); i++) {

            DefaultTableCellRenderer renderer = new DefaultTableCellRenderer();

            renderer.setHorizontalAlignment(model.col[i].getM_alignment());          

            jTable1.addColumn(new TableColumn(i, model.col[i].getM_width(), renderer, null));

            JTableHeader header=jTable1.getTableHeader();

            header.setUpdateTableInRealTime(false);

        }

    }

    private void calculDebitCredit(){

       double totalDebit=0;

       double totalCredit=0;

       for(int i=0;i<jTable1.getRowCount();i++){

           try{

            Object tmp=jTable1.getValueAt(i,1);

            Object tmp2=jTable1.getValueAt(i,2);

            if(tmp instanceof Double){

                totalDebit=totalDebit+((Double)tmp).doubleValue();

                totalDebit=MathRound.roundThisToDouble(totalDebit);

            }

            if(tmp2 instanceof Double){

                totalCredit=totalCredit+((Double)tmp2).doubleValue();   

                totalCredit=MathRound.roundThisToDouble(totalCredit);               

            }

           }catch(ClassCastException e){

               

           }

       }

        grp_Label_Debit.setText(""+totalDebit);

        grp_Label_Credit.setText(""+totalCredit);

        

    }

    /** This method is called from within the constructor to

     * initialize the form.

     * WARNING: Do NOT modify this code. The content of this method is

     * always regenerated by the Form Editor.

     */

    private void initComponents() {//GEN-BEGIN:initComponents

        java.awt.GridBagConstraints gridBagConstraints;



        jPanel1 = new javax.swing.JPanel();

        jLabel1 = new javax.swing.JLabel();

        grp_Label_Debit = new javax.swing.JLabel();

        jLabel3 = new javax.swing.JLabel();

        grp_Label_Credit = new javax.swing.JLabel();

        jPanel2 = new javax.swing.JPanel();

        jScrollPane1 = new javax.swing.JScrollPane();

        jTable1 = new javax.swing.JTable();



        setLayout(new java.awt.BorderLayout());



        jPanel1.setLayout(new java.awt.GridBagLayout());



        jLabel1.setFont(new java.awt.Font("Tahoma", 1, 10));

        jLabel1.setText("Totale D\u00e9bit");

        jPanel1.add(jLabel1, new java.awt.GridBagConstraints());



        grp_Label_Debit.setPreferredSize(new java.awt.Dimension(80, 13));

        gridBagConstraints = new java.awt.GridBagConstraints();

        gridBagConstraints.insets = new java.awt.Insets(0, 12, 0, 0);

        jPanel1.add(grp_Label_Debit, gridBagConstraints);



        jLabel3.setFont(new java.awt.Font("Tahoma", 1, 10));

        jLabel3.setText("Total Cr\u00e9dit");

        gridBagConstraints = new java.awt.GridBagConstraints();

        gridBagConstraints.insets = new java.awt.Insets(0, 11, 0, 0);

        jPanel1.add(jLabel3, gridBagConstraints);



        grp_Label_Credit.setPreferredSize(new java.awt.Dimension(80, 13));

        gridBagConstraints = new java.awt.GridBagConstraints();

        gridBagConstraints.insets = new java.awt.Insets(0, 12, 0, 0);

        jPanel1.add(grp_Label_Credit, gridBagConstraints);



        add(jPanel1, java.awt.BorderLayout.CENTER);



        jPanel2.setPreferredSize(new java.awt.Dimension(30, 200));

        jScrollPane1.setPreferredSize(new java.awt.Dimension(453, 180));

        jTable1.setModel(new javax.swing.table.DefaultTableModel());

        jScrollPane1.setViewportView(jTable1);



        jPanel2.add(jScrollPane1);



        add(jPanel2, java.awt.BorderLayout.NORTH);



    }//GEN-END:initComponents

    

    

    // Variables declaration - do not modify//GEN-BEGIN:variables

    private javax.swing.JLabel grp_Label_Credit;

    private javax.swing.JPanel jPanel2;

    private javax.swing.JPanel jPanel1;

    private javax.swing.JScrollPane jScrollPane1;

    private javax.swing.JTable jTable1;

    private javax.swing.JLabel jLabel3;

    private javax.swing.JLabel grp_Label_Debit;

    private javax.swing.JLabel jLabel1;

    // End of variables declaration//GEN-END:variables

    CheckSumComptaTableModel model;

}

